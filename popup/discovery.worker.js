!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=120)}([function(t,e,n){"use strict";(function(t){function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer.prototype):(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,n){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return a(this,t)}return s(this,t,e,n)}function s(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?l(t,e,n,r):"string"==typeof e?c(t,e,n):p(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return u(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function a(t,e){if(u(e),t=o(t,e<0?0:0|d(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(e,n);t=o(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function l(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),Buffer.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer.prototype):t=h(t,e),t}function p(t,e){if(Buffer.isBuffer(e)){var n=0|d(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||J(e.length)?o(t,0):h(t,e);if("Buffer"===e.type&&X(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function g(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return q(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=Buffer.from(e,r)),Buffer.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,u=t.length,f=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,f/=2,n/=2}var a;if(i){var c=-1;for(a=n;a<u;a++)if(o(t,a)===o(e,c===-1?0:a-c)){if(c===-1&&(c=a),a-c+1===f)return c*s}else c!==-1&&(a-=a-c),c=-1}else for(n+f>u&&(n=u-f),a=n;a>=0;a--){for(var h=!0,l=0;l<f;l++)if(o(t,a+l)!==o(e,l)){h=!1;break}if(h)return a}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))return s;t[n+s]=u}return s}function E(t,e,n,r){return Y(q(e,t.length-n),t,n,r)}function S(t,e,n,r){return Y(G(e),t,n,r)}function T(t,e,n,r){return S(t,e,n,r)}function P(t,e,n,r){return Y(V(e),t,n,r)}function O(t,e,n,r){return Y(W(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=n){var f,a,c,h;switch(u){case 1:o<128&&(s=o);break;case 2:f=t[i+1],128==(192&f)&&(h=(31&o)<<6|63&f)>127&&(s=h);break;case 3:f=t[i+1],a=t[i+2],128==(192&f)&&128==(192&a)&&(h=(15&o)<<12|(63&f)<<6|63&a)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:f=t[i+1],a=t[i+2],c=t[i+3],128==(192&f)&&128==(192&a)&&128==(192&c)&&(h=(15&o)<<18|(63&f)<<12|(63&a)<<6|63&c)>65535&&h<1114112&&(s=h)}}null===s?(s=65533,u=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=u}return B(r)}function B(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=$));return n}function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z(t[o]);return i}function U(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function H(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function C(t,e,n,r,i){return i||M(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,i){return i||M(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,n,r,52,8),n+8}function K(t){if(t=F(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function F(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function V(t){return Z.toByteArray(K(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function J(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Z=n(58),Q=n(93),X=n(43);e.Buffer=Buffer,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=i(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,n){return s(null,t,e,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,n){return f(null,t,e,n)},Buffer.allocUnsafe=function(t){return a(null,t)},Buffer.allocUnsafeSlow=function(t){return a(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!X(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=Buffer.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!Buffer.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Buffer.byteLength=g,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,n,r,i){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,u=Math.min(o,s),f=this.slice(r,i),a=t.slice(e,n),c=0;c<u;++c)if(f[c]!==a[c]){o=f[c],s=a[c];break}return o<s?-1:s<o?1:0},Buffer.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},Buffer.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},Buffer.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},Buffer.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return P(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;Buffer.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(Buffer.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=Buffer.prototype;else{var i=e-t;r=new Buffer(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},Buffer.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},Buffer.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},Buffer.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},Buffer.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},Buffer.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),Q.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),Q.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),Q.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),Q.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){N(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},Buffer.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){N(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},Buffer.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):H(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):H(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,u=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},Buffer.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,u=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},Buffer.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):H(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):H(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,n){return C(this,t,e,!0,n)},Buffer.prototype.writeFloatBE=function(t,e,n){return C(this,t,e,!1,n)},Buffer.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},Buffer.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},Buffer.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},Buffer.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=Buffer.isBuffer(t)?t:q(new Buffer(t,r).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(9))},function(t,e,n){function r(t){return u.String(t)?"?"===t[0]?p.maybe(r(t.slice(1))):u[t]||p.quacksLike(t):t&&u.Object(t)?u.Array(t)?p.arrayOf(r(t[0])):p.object(t):u.Function(t)?t:p.value(t)}function i(t,e,n,o){if(u.Function(t)){if(t(e,n))return!0;throw new a(o||t,e)}return i(r(t),e,n)}function o(t,e,n,r){if("function"==typeof n)return o(t,e,!1,n);try{i(t,e,n)}catch(t){return r(t)}r()}var s=n(49),u=n(50),f=s.tfJSON,a=s.TfTypeError,c=s.TfPropertyTypeError,h=s.tfSubError,l=s.getValueTypeName,p={arrayOf:function(t){function e(e,n){return!!u.Array(e)&&e.every(function(e,r){try{return i(t,e,n)}catch(t){throw h(t,r)}})}return t=r(t),e.toJSON=function(){return"["+f(t)+"]"},e},maybe:function t(e){function n(n,r){return u.Null(n)||e(n,r,t)}return e=r(e),n.toJSON=function(){return"?"+f(e)},n},map:function(t,e){function n(n,r){if(!u.Object(n,r))return!1;if(u.Null(n,r))return!1;for(var o in n){try{e&&i(e,o,r)}catch(t){throw h(t,o,"key")}try{var s=n[o];i(t,s,r)}catch(t){throw h(t,o)}}return!0}return t=r(t),e&&(e=r(e)),n.toJSON=e?function(){return"{"+f(e)+": "+f(t)+"}"}:function(){return"{"+f(t)+"}"},n},object:function(t){function e(t,e){if(!u.Object(t))return!1;if(u.Null(t))return!1;var r;try{for(r in n){i(n[r],t[r],e)}}catch(t){throw h(t,r)}if(e)for(r in t)if(!n[r])throw new c(void 0,r);return!0}var n={};for(var o in t)n[o]=r(t[o]);return e.toJSON=function(){return f(n)},e},oneOf:function(){function t(t,n){return e.some(function(e){try{return i(e,t,n)}catch(t){return!1}})}var e=[].slice.call(arguments).map(r);return t.toJSON=function(){return e.map(f).join("|")},t},quacksLike:function(t){function e(e){return t===l(e)}return e.toJSON=function(){return t},e},tuple:function(){function t(t,n){return e.every(function(e,r){try{return i(e,t[r],n)}catch(t){throw h(t,r)}})&&(!n||t.length===arguments.length)}var e=[].slice.call(arguments).map(r);return t.toJSON=function(){return"("+e.map(f).join(", ")+")"},t},value:function(t){function e(e){return e===t}return e.toJSON=function(){return t},e}};for(var d in u)i[d]=u[d];for(d in p)i[d]=p[d];var v=n(112);for(d in v)i[d]=v[d];i.async=o,i.compile=r,i.TfTypeError=a,i.TfPropertyTypeError=c,t.exports=i},function(t,e,n){function r(t){return s.UInt32(t)&&t<=u}function i(t){return s.String(t)&&t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function o(t){return s.UInt53(t)&&t<=f}var s=n(1),u=Math.pow(2,31)-1;i.toJSON=function(){return"BIP32 derivation path"};var f=21e14,a=s.quacksLike("BigInteger"),c=s.quacksLike("Point"),h=s.compile({r:a,s:a}),l=s.compile({messagePrefix:s.oneOf(s.Buffer,s.String),bip32:{public:s.UInt32,private:s.UInt32},pubKeyHash:s.UInt16,scriptHash:s.UInt16,wif:s.UInt8}),p={BigInt:a,BIP32Path:i,Buffer256bit:s.BufferN(32),ECPoint:c,ECSignature:h,Hash160bit:s.BufferN(20),Hash256bit:s.BufferN(32),Network:l,Satoshi:o,UInt31:r};for(var d in s)p[d]=s[d];t.exports=p},function(t,e,n){(function(Buffer){function e(t){return g.Number(t)&&(t===m.OP_0||t>=m.OP_1&&t<=m.OP_16||t===m.OP_1NEGATE)}function r(t){return g.Buffer(t)||e(t)}function i(t){return g.Array(t)&&t.every(r)}function o(t){if(Buffer.isBuffer(t))return t;v(g.Array,t);var e=t.reduce(function(t,e){return Buffer.isBuffer(e)?1===e.length&&(129===e[0]||e[0]>=1&&e[0]<=16)?t+1:t+d.encodingLength(e.length)+e.length:t+1},0),n=new Buffer(e),r=0;if(t.forEach(function(t){if(Buffer.isBuffer(t)){if(1===t.length&&t[0]>=1&&t[0]<=16){var e=b+t[0];return n.writeUInt8(e,r),void(r+=1)}if(1===t.length&&129===t[0])return n.writeUInt8(m.OP_1NEGATE,r),void(r+=1);r+=d.encode(n,t.length,r),t.copy(n,r),r+=t.length}else n.writeUInt8(t,r),r+=1}),r!==n.length)throw new Error("Could not decode chunks");return n}function s(t){if(g.Array(t))return t;v(g.Buffer,t);for(var e=[],n=0;n<t.length;){var r=t[n];if(r>m.OP_0&&r<=m.OP_PUSHDATA4){var i=d.decode(t,n);if(null===i)return[];if((n+=i.size)+i.number>t.length)return[];var o=t.slice(n,n+i.number);n+=i.number,e.push(o)}else e.push(r),n+=1}return e}function u(t){return Buffer.isBuffer(t)&&(t=s(t)),t.map(function(t){return Buffer.isBuffer(t)?t.toString("hex"):w[t]}).join(" ")}function f(t){return v(g.String,t),o(t.split(" ").map(function(t){return void 0!==m[t]?m[t]:(v(g.Hex,t),new Buffer(t,"hex"))}))}function a(t){return t=s(t),v(i,t),t.map(function(t){return Buffer.isBuffer(t)?t:t===m.OP_0?new Buffer(0):y.encode(t-b)})}function c(t){if(!Buffer.isBuffer(t))return!1;if(t.length<33)return!1;switch(t[0]){case 2:case 3:return 33===t.length;case 4:return 65===t.length}return!1}function h(t){var e=t&-129;return e>0&&e<4}function l(t){return!!Buffer.isBuffer(t)&&(!!h(t[t.length-1])&&p.check(t.slice(0,-1)))}var p=n(35),d=n(44),v=n(1),g=n(2),y=n(37),m=n(5),w=n(60),b=m.OP_RESERVED;t.exports={compile:o,decompile:s,fromASM:f,toASM:u,toStack:a,number:n(37),isCanonicalPubKey:c,isCanonicalSignature:l,isPushOnly:i,isDefinedHashType:h};var _=n(66);for(var E in _)t.exports[E]=_[E]}).call(e,n(0).Buffer)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_1:81,OP_TRUE:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255}},function(t,e,n){var BigInteger=n(34);n(59),t.exports=BigInteger},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){v&&p&&(v=!1,p.length?d=p.concat(d):g=-1,d.length&&u())}function u(){if(!v){var t=i(s);v=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,v=!1,o(t)}}function f(t,e){this.fun=t,this.array=e}function a(){}var c,h,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var p,d=[],v=!1,g=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new f(t,e)),1!==d.length||v||i(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);a.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||u(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=r;var u=n(28),f=n(13);f.inherits=n(4);var a=n(46),c=n(30);f.inherits(r,a);for(var h=s(c.prototype),l=0;l<h.length;l++){var p=h[l];r.prototype[p]||(r.prototype[p]=c.prototype[p])}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function r(t){return f("rmd160").update(t).digest()}function i(t){return f("sha1").update(t).digest()}function o(t){return f("sha256").update(t).digest()}function s(t){return r(o(t))}function u(t){return o(o(t))}var f=n(15);t.exports={hash160:s,hash256:u,ripemd160:r,sha1:i,sha256:o}},function(t,e,n){(function(Buffer){function e(t,e){this._block=new Buffer(t),this._finalSize=e,this._blockSize=t,this._len=0,this._s=0}e.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=new Buffer(t,e));for(var n=this._len+=t.length,r=this._s||0,i=0,o=this._block;r<n;){for(var s=Math.min(t.length,i+this._blockSize-r%this._blockSize),u=s-i,f=0;f<u;f++)o[r%this._blockSize+f]=t[f+i];r+=u,i+=u,r%this._blockSize==0&&this._update(o)}return this._s=r,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var n=this._update(this._block)||this._hash();return t?n.toString(t):n},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=e}).call(e,n(0).Buffer)},function(t,e){t.exports={bitcoin:{messagePrefix:"Bitcoin Signed Message:\n",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},testnet:{messagePrefix:"Bitcoin Signed Message:\n",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},litecoin:{messagePrefix:"Litecoin Signed Message:\n",bip32:{public:27108450,private:27106558},pubKeyHash:48,scriptHash:5,wif:176}}},function(t,e,n){(function(Buffer){function t(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function n(t){return"boolean"==typeof t}function r(t){return null===t}function i(t){return null==t}function o(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function f(t){return void 0===t}function a(t){return"[object RegExp]"===v(t)}function c(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===v(t)}function l(t){return"[object Error]"===v(t)||t instanceof Error}function p(t){return"function"==typeof t}function d(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function v(t){return Object.prototype.toString.call(t)}e.isArray=t,e.isBoolean=n,e.isNull=r,e.isNullOrUndefined=i,e.isNumber=o,e.isString=s,e.isSymbol=u,e.isUndefined=f,e.isRegExp=a,e.isObject=c,e.isDate=h,e.isError=l,e.isFunction=p,e.isPrimitive=d,e.isBuffer=Buffer.isBuffer}).call(e,n(0).Buffer)},function(t,e,n){function r(){i.call(this)}t.exports=r;var i=n(16).EventEmitter;n(4)(r,i),r.Readable=n(101),r.Writable=n(103),r.Duplex=n(98),r.Transform=n(102),r.PassThrough=n(100),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&a.pause&&a.pause()}function r(){a.readable&&a.resume&&a.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(f(),0===i.listenerCount(this,"error"))throw t}function f(){a.removeListener("data",n),t.removeListener("drain",r),a.removeListener("end",o),a.removeListener("close",s),a.removeListener("error",u),t.removeListener("error",u),a.removeListener("end",f),a.removeListener("close",f),t.removeListener("close",f)}var a=this;a.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(a.on("end",o),a.on("close",s));var c=!1;return a.on("error",u),t.on("error",u),a.on("end",f),a.on("close",f),t.on("close",f),t.emit("pipe",a),t}},function(t,e,n){"use strict";(function(Buffer){function e(t){f.call(this,"digest"),this._hash=t,this.buffers=[]}function r(t){f.call(this,"digest"),this._hash=t}var i=n(4),o=n(91),s=n(104),u=n(106),f=n(89);i(e,f),e.prototype._update=function(t){this.buffers.push(t)},e.prototype._final=function(){var t=Buffer.concat(this.buffers),e=this._hash(t);return this.buffers=null,e},i(r,f),r.prototype._update=function(t){this._hash.update(t)},r.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return t=t.toLowerCase(),"md5"===t?new e(o):"rmd160"===t||"ripemd160"===t?new e(s):new r(u(t))}}).call(e,n(0).Buffer)},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,u,f,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(o(n))for(u=Array.prototype.slice.call(arguments,1),a=n.slice(),i=a.length,f=0;f<i;f++)a[f].apply(this,u);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,s,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(u=s;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){i=u;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function s(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function u(t){if(b.isFunction(t)){if(S)return t.name;var e=t.toString(),n=e.match(P);return n&&n[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function a(t){if(S||!b.isFunction(t))return b.inspect(t);var e=u(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return f(a(t.actual),128)+" "+t.operator+" "+f(a(t.expected),128)}function h(t,e,n,r,i){throw new T.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function l(t,e){t||h(t,!0,e,"==",T.ok)}function p(t,e,n,u){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(b.isDate(t)&&b.isDate(e))return t.getTime()===e.getTime();if(b.isRegExp(t)&&b.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(s(t)&&s(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;u=u||{actual:[],expected:[]};var f=u.actual.indexOf(t);return f!==-1&&f===u.expected.indexOf(e)||(u.actual.push(t),u.expected.push(e),v(t,e,n,u))}return n?t===e:t==e}function d(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(b.isPrimitive(t)||b.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=d(t),o=d(e);if(i&&!o||!i&&o)return!1;if(i)return t=E.call(t),e=E.call(e),p(t,e,n);var s,u,f=O(t),a=O(e);if(f.length!==a.length)return!1;for(f.sort(),a.sort(),u=f.length-1;u>=0;u--)if(f[u]!==a[u])return!1;for(u=f.length-1;u>=0;u--)if(s=f[u],!p(t[s],e[s],n,r))return!1;return!0}function g(t,e,n){p(t,e,!0)&&h(t,e,n,"notDeepStrictEqual",g)}function y(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&e.call({},t)===!0}function m(t){var e;try{t()}catch(t){e=t}return e}function w(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=m(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&h(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!t&&b.isError(i),u=!t&&i&&!n;if((s&&o&&y(i,n)||u)&&h(i,n,"Got unwanted exception"+r),t&&i&&n&&!y(i,n)||!t&&i)throw i}var b=n(116),_=Object.prototype.hasOwnProperty,E=Array.prototype.slice,S=function(){return"foo"===function(){}.name}(),T=t.exports=l,P=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=u(e),o=r.indexOf("\n"+i);if(o>=0){var s=r.indexOf("\n",o+1);r=r.substring(s+1)}this.stack=r}}},b.inherits(T.AssertionError,Error),T.fail=h,T.ok=l,T.equal=function(t,e,n){t!=e&&h(t,e,n,"==",T.equal)},T.notEqual=function(t,e,n){t==e&&h(t,e,n,"!=",T.notEqual)},T.deepEqual=function(t,e,n){p(t,e,!1)||h(t,e,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(t,e,n){p(t,e,!0)||h(t,e,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(t,e,n){p(t,e,!1)&&h(t,e,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=g,T.strictEqual=function(t,e,n){t!==e&&h(t,e,n,"===",T.strictEqual)},T.notStrictEqual=function(t,e,n){t===e&&h(t,e,n,"!==",T.notStrictEqual)},T.throws=function(t,e,n){w(!0,t,e,n)},T.doesNotThrow=function(t,e,n){w(!1,t,e,n)},T.ifError=function(t){if(t)throw t};var O=Object.keys||function(t){var e=[];for(var n in t)_.call(t,n)&&e.push(n);return e}}).call(e,n(9))},function(t,e,n){"use strict";function r(t){var e=t.hash;Array.prototype.reverse.call(e);var n=e.toString("hex");return Array.prototype.reverse.call(e),n}function i(t){return Object.keys(t).map(function(e){return t[e]})}Object.defineProperty(e,"__esModule",{value:!0}),e.getInputId=r,e.objectValues=i},function(t,e,n){"use strict";function r(){var t=function(t){},e=function(t){};return{promise:new Promise(function(n,r){t=n,e=r}),resolve:t,reject:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.deferred=r},function(t,e,n){(function(Buffer){function e(t){var e=s.decode(t);if(e.length<21)throw new TypeError(t+" is too short");if(e.length>22)throw new TypeError(t+" is too long");var n=22===e.length,r=n?2:1,i=n?e.readUInt16BE(0):e[0];return{hash:e.slice(r),version:i}}function r(t,e){a(c.tuple(c.Hash160bit,c.UInt16),arguments);var n=e>255,r=n?22:21,i=n?2:1,o=new Buffer(r);return n?o.writeUInt16BE(e,0):o.writeUInt8(e,0),t.copy(o,i),s.encode(o)}function i(t,e){if(e=e||f.bitcoin,u.pubKeyHash.output.check(t))return r(u.compile(t).slice(3,23),e.pubKeyHash);if(u.scriptHash.output.check(t))return r(u.compile(t).slice(2,22),e.scriptHash);throw new Error(u.toASM(t)+" has no matching Address")}function o(t,n){n=n||f.bitcoin;var r=e(t);if(r.version===n.pubKeyHash)return u.pubKeyHash.output.encode(r.hash);if(r.version===n.scriptHash)return u.scriptHash.output.encode(r.hash);throw new Error(t+" has no matching Script")}var s=n(36),u=n(3),f=n(12),a=n(1),c=n(2);t.exports={fromBase58Check:e,fromOutputScript:i,toBase58Check:r,toOutputScript:o}}).call(e,n(0).Buffer)},function(t,e,n){function r(t,e){if("number"!=typeof t)throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function i(t,e){var n=t.readUInt32LE(e),i=t.readUInt32LE(e+4);return i*=4294967296,r(i+n,9007199254740991),i+n}function o(t,e,n){return r(e,9007199254740991),t.writeInt32LE(e&-1,n),t.writeUInt32LE(Math.floor(e/4294967296),n+4),n+8}function s(t,e){return{number:a.decode(t,e),size:a.decode.bytes}}function u(t,e,n){return a.encode(e,t,n),a.encode.bytes}var f=n(44),a=n(117);t.exports={pushDataSize:f.encodingLength,readPushDataInt:f.decode,readUInt64LE:i,readVarInt:s,varIntBuffer:a.encode,varIntSize:a.encodingLength,writePushDataInt:f.encode,writeUInt64LE:o,writeVarInt:u}},function(t,e,n){function ECPair(t,e,n){if(n&&u({compressed:f.maybe(f.Boolean),network:f.maybe(f.Network)},n),n=n||{},t){if(t.signum()<=0)throw new Error("Private key must be greater than 0");if(t.compareTo(l.n)>=0)throw new Error("Private key must be less than the curve order");if(e)throw new TypeError("Unexpected publicKey parameter");this.d=t}else u(f.ECPoint,e),this.__Q=e;this.compressed=void 0===n.compressed||n.compressed,this.network=n.network||c.bitcoin}var r=n(20),i=n(10),o=n(64),s=n(97),u=n(1),f=n(2),a=n(118),c=n(12),BigInteger=n(6),h=n(27),l=o.__curve;Object.defineProperty(ECPair.prototype,"Q",{get:function(){return!this.__Q&&this.d&&(this.__Q=l.G.multiply(this.d)),this.__Q}}),ECPair.fromPublicKeyBuffer=function(t,e){var n=h.Point.decodeFrom(l,t);return new ECPair(null,n,{compressed:n.compressed,network:e})},ECPair.fromWIF=function(t,e){var n=a.decode(t),r=n.version;if(f.Array(e)){if(!(e=e.filter(function(t){return r===t.wif}).pop()))throw new Error("Unknown network version")}else if(e=e||c.bitcoin,r!==e.wif)throw new Error("Invalid network version");return new ECPair(BigInteger.fromBuffer(n.privateKey),null,{compressed:n.compressed,network:e})},ECPair.makeRandom=function(t){t=t||{};var e,n=t.rng||s;do{var r=n(32);u(f.Buffer256bit,r),e=BigInteger.fromBuffer(r)}while(e.signum()<=0||e.compareTo(l.n)>=0);return new ECPair(e,null,t)},ECPair.prototype.getAddress=function(){return r.toBase58Check(i.hash160(this.getPublicKeyBuffer()),this.getNetwork().pubKeyHash)},ECPair.prototype.getNetwork=function(){return this.network},ECPair.prototype.getPublicKeyBuffer=function(){return this.Q.getEncoded(this.compressed)},ECPair.prototype.sign=function(t){if(!this.d)throw new Error("Missing private key");return o.sign(t,this.d)},ECPair.prototype.toWIF=function(){if(!this.d)throw new Error("Missing private key");return a.encode(this.network.wif,this.d.toBuffer(32),this.compressed)},ECPair.prototype.verify=function(t,e){return o.verify(t,e,this.Q)},t.exports=ECPair},function(t,e,n){(function(Buffer){function e(t,e){i(o.tuple(o.BigInt,o.BigInt),arguments),this.r=t,this.s=e}var r=n(35),i=n(1),o=n(2),BigInteger=n(6);e.parseCompact=function(t){if(65!==t.length)throw new Error("Invalid signature length");var n=t.readUInt8(0)-27;if(n!==(7&n))throw new Error("Invalid signature parameter");return{compressed:!!(4&n),i:3&n,signature:new e(BigInteger.fromBuffer(t.slice(1,33)),BigInteger.fromBuffer(t.slice(33)))}},e.fromDER=function(t){var n=r.decode(t);return new e(BigInteger.fromDERInteger(n.r),BigInteger.fromDERInteger(n.s))},e.parseScriptSignature=function(t){var n=t.readUInt8(t.length-1),r=n&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+n);return{signature:e.fromDER(t.slice(0,-1)),hashType:n}},e.prototype.toCompact=function(t,e){e&&(t+=4),t+=27;var n=new Buffer(65);return n.writeUInt8(t,0),this.r.toBuffer(32).copy(n,1),this.s.toBuffer(32).copy(n,33),n},e.prototype.toDER=function(){var t=new Buffer(this.r.toDERInteger()),e=new Buffer(this.s.toDERInteger());return r.encode(t,e)},e.prototype.toScriptSignature=function(t){var e=t&-129;if(e<=0||e>=4)throw new Error("Invalid hashType "+t);var n=new Buffer(1);return n.writeUInt8(t,0),Buffer.concat([this.toDER(),n])},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){t.exports={Block:n(63),ECPair:n(22),ECSignature:n(23),HDNode:n(65),Transaction:n(25),TransactionBuilder:n(86),address:n(20),bufferutils:n(21),crypto:n(10),networks:n(12),opcodes:n(5),script:n(3)}},function(t,e,n){(function(Buffer){function e(t){var e=t.length;return u.varIntSize(e)+e}function r(t){var n=t.length;return u.varIntSize(n)+t.reduce(function(t,n){return t+e(n)},0)}function i(){this.version=1,this.locktime=0,this.ins=[],this.outs=[],this.joinsplits=[]}var o=n(10),s=n(3),u=n(21),f=n(5),a=n(1),c=n(2);i.DEFAULT_SEQUENCE=4294967295,i.SIGHASH_ALL=1,i.SIGHASH_NONE=2,i.SIGHASH_SINGLE=3,i.SIGHASH_ANYONECANPAY=128,i.ADVANCED_TRANSACTION_MARKER=0,i.ADVANCED_TRANSACTION_FLAG=1;var h=new Buffer(0),l=[],p=new Buffer("0000000000000000000000000000000000000000000000000000000000000000","hex"),d=new Buffer("0000000000000000000000000000000000000000000000000000000000000001","hex"),v=new Buffer("ffffffffffffffff","hex"),g={script:h,valueBuffer:v};i.ZCASH_NUM_JS_INPUTS=2,i.ZCASH_NUM_JS_OUTPUTS=2,i.ZCASH_NOTECIPHERTEXT_SIZE=601,i.ZCASH_G1_PREFIX_MASK=2,i.ZCASH_G2_PREFIX_MASK=10,i.fromBuffer=function(t,e,n){function r(e){return g+=e,t.slice(g-e,g)}function o(){var e=t.readUInt8(g);return g+=1,e}function s(){var e=t.readUInt32LE(g);return g+=4,e}function f(){var e=t.readInt32LE(g);return g+=4,e}function a(){var e=u.readUInt64LE(t,g);return g+=8,e}function c(){var e=u.readVarInt(t,g);return g+=e.size,e.number}function h(){return r(c())}function p(){for(var t=c(),e=[],n=0;n<t;n++)e.push(h());return e}function d(){var t=1&o();return{x:r(32),yLsb:t}}function v(){var t=1&o();return{x:r(64),yLsb:t}}var g=0,y=new i;y.version=f();var m=t.readUInt8(g),w=t.readUInt8(g+1),b=!1;e||m===i.ADVANCED_TRANSACTION_MARKER&&w===i.ADVANCED_TRANSACTION_FLAG&&(g+=2,b=!0);for(var _=c(),E=0;E<_;++E)y.ins.push({hash:r(32),index:s(),script:h(),sequence:s(),witness:l});var S=c();for(E=0;E<S;++E)y.outs.push({value:a(),script:h()});if(b){for(E=0;E<_;++E)y.ins[E].witness=p();if(!y.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(y.locktime=s(),y.version>=2&&e){var T=c();for(E=0;E<T;++E){for(var P=a(),O=a(),I=r(32),A=[],B=0;B<i.ZCASH_NUM_JS_INPUTS;B++)A.push(r(32));var x=[];for(B=0;B<i.ZCASH_NUM_JS_OUTPUTS;B++)x.push(r(32));var k=r(32),R=r(32),U=[];for(B=0;B<i.ZCASH_NUM_JS_INPUTS;B++)U.push(r(32));var L={gA:d(),gAPrime:d(),gB:v(),gBPrime:d(),gC:d(),gCPrime:d(),gK:d(),gH:d()},N=[];for(B=0;B<i.ZCASH_NUM_JS_OUTPUTS;B++)N.push(r(i.ZCASH_NOTECIPHERTEXT_SIZE));y.joinsplits.push({vpubOld:P,vpubNew:O,anchor:I,nullifiers:A,commitments:x,ephemeralKey:k,randomSeed:R,macs:U,zproof:L,ciphertexts:N})}T>0&&(y.joinsplitPubkey=r(32),y.joinsplitSig=r(64))}if(y.zcash=!!e,n)return y;if(g!==t.length)throw new Error("Transaction has unexpected data");return y},i.fromHex=function(t,e){return i.fromBuffer(new Buffer(t,"hex"),e)},i.isCoinbaseHash=function(t){a(c.Hash256bit,t);for(var e=0;e<32;++e)if(0!==t[e])return!1;return!0},i.prototype.isCoinbase=function(){return 1===this.ins.length&&i.isCoinbaseHash(this.ins[0].hash)},i.prototype.addInput=function(t,e,n,r){return a(c.tuple(c.Hash256bit,c.UInt32,c.maybe(c.UInt32),c.maybe(c.Buffer)),arguments),c.Null(n)&&(n=i.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:e,script:r||h,sequence:n,witness:l})-1},i.prototype.addOutput=function(t,e){return a(c.tuple(c.Buffer,c.Satoshi),arguments),this.outs.push({script:t,value:e})-1},i.prototype.hasWitnesses=function(){return this.ins.some(function(t){return 0!==t.witness.length})},i.prototype.byteLength=function(){return this.__byteLength(!0)},i.prototype.joinsplitByteLength=function(){if(this.version<2)return 0;if(!this.zcash)return 0;var t=this.joinsplits.length>0?96:0;return u.varIntSize(this.joinsplits.length)+this.joinsplits.reduce(function(t,e){return t+8+8+32+32*e.nullifiers.length+32*e.commitments.length+32+32+32*e.macs.length+65+231+e.ciphertexts.length*i.ZCASH_NOTECIPHERTEXT_SIZE},0)+t},i.prototype.__byteLength=function(t){var n=t&&this.hasWitnesses();return(n?10:8)+u.varIntSize(this.ins.length)+u.varIntSize(this.outs.length)+this.ins.reduce(function(t,n){return t+40+e(n.script)},0)+this.outs.reduce(function(t,n){return t+8+e(n.script)},0)+(n?this.ins.reduce(function(t,e){return t+r(e.witness)},0):0)+this.joinsplitByteLength()},i.prototype.clone=function(){var t=new i;return t.version=this.version,t.locktime=this.locktime,t.zcash=this.zcash,t.ins=this.ins.map(function(t){return{hash:t.hash,index:t.index,script:t.script,sequence:t.sequence,witness:t.witness}}),t.outs=this.outs.map(function(t){return{script:t.script,value:t.value}}),t},i.prototype.hashForSignature=function(t,e,n){if(a(c.tuple(c.UInt32,c.Buffer,c.Number),arguments),t>=this.ins.length)return d;var r=s.compile(s.decompile(e).filter(function(t){return t!==f.OP_CODESEPARATOR})),u=this.clone();if((31&n)===i.SIGHASH_NONE)u.outs=[],u.ins.forEach(function(e,n){n!==t&&(e.sequence=0)});else if((31&n)===i.SIGHASH_SINGLE){if(t>=this.outs.length)return d;u.outs.length=t+1;for(var l=0;l<t;l++)u.outs[l]=g;u.ins.forEach(function(e,n){n!==t&&(e.sequence=0)})}n&i.SIGHASH_ANYONECANPAY?(u.ins=[u.ins[t]],u.ins[0].script=r):(u.ins.forEach(function(t){t.script=h}),u.ins[t].script=r);var p=new Buffer(u.__byteLength(!1)+4);return p.writeInt32LE(n,p.length-4),u.__toBuffer(p,0,!1),o.hash256(p)},i.prototype.hashForWitnessV0=function(t,n,r,s){function f(t){y+=t.copy(g,y)}function h(t){y=g.writeUInt32LE(t,y)}function l(t){y=u.writeUInt64LE(g,t,y)}function d(t){y+=u.writeVarInt(g,t,y)}function v(t){d(t.length),f(t)}a(c.tuple(c.UInt32,c.Buffer,c.Satoshi,c.UInt32),arguments);var g,y,m=p,w=p,b=p;if(s&i.SIGHASH_ANYONECANPAY||(g=new Buffer(36*this.ins.length),y=0,this.ins.forEach(function(t){f(t.hash),h(t.index)}),w=o.hash256(g)),s&i.SIGHASH_ANYONECANPAY||(31&s)===i.SIGHASH_SINGLE||(31&s)===i.SIGHASH_NONE||(g=new Buffer(4*this.ins.length),y=0,this.ins.forEach(function(t){h(t.sequence)}),b=o.hash256(g)),(31&s)!==i.SIGHASH_SINGLE&&(31&s)!==i.SIGHASH_NONE){var _=this.outs.reduce(function(t,n){return t+8+e(n.script)},0);g=new Buffer(_),y=0,this.outs.forEach(function(t){l(t.value),v(t.script)}),m=o.hash256(g)}else if((31&s)===i.SIGHASH_SINGLE&&t<this.outs.length){var E=this.outs[t];g=new Buffer(8+e(E.script)),y=0,l(E.value),v(E.script),m=o.hash256(g)}g=new Buffer(156+e(n)),y=0;var S=this.ins[t];return h(this.version),f(w),f(b),f(S.hash),h(S.index),v(n),l(r),h(S.sequence),f(m),h(this.locktime),h(s),o.hash256(g)},i.prototype.getHash=function(){return o.hash256(this.__toBuffer(void 0,void 0,!1))},i.prototype.getId=function(){return this.getHash().reverse().toString("hex")},i.prototype.toBuffer=function(t,e){return this.__toBuffer(t,e,!0)},i.prototype.__toBuffer=function(t,e,n){function r(e){v+=e.copy(t,v)}function o(e){v=t.writeUInt8(e,v)}function s(e){v=t.writeUInt32LE(e,v)}function f(e){v=t.writeInt32LE(e,v)}function a(e){v=u.writeUInt64LE(t,e,v)}function c(e){v+=u.writeVarInt(t,e,v)}function h(t){c(t.length),r(t)}function l(t){c(t.length),t.forEach(h)}function p(t){o(i.ZCASH_G1_PREFIX_MASK|t.yLsb),r(t.x)}function d(t){o(i.ZCASH_G2_PREFIX_MASK|t.yLsb),r(t.x)}t||(t=new Buffer(this.__byteLength(n)));var v=e||0;f(this.version);var g=n&&this.hasWitnesses();return g&&(o(i.ADVANCED_TRANSACTION_MARKER),o(i.ADVANCED_TRANSACTION_FLAG)),c(this.ins.length),this.ins.forEach(function(t){r(t.hash),s(t.index),h(t.script),s(t.sequence)}),c(this.outs.length),this.outs.forEach(function(t){t.valueBuffer?r(t.valueBuffer):a(t.value),h(t.script)}),g&&this.ins.forEach(function(t){l(t.witness)}),s(this.locktime),this.version>=2&&this.zcash&&(c(this.joinsplits.length),this.joinsplits.forEach(function(t){a(t.vpubOld),a(t.vpubNew),r(t.anchor),t.nullifiers.forEach(function(t){r(t)}),t.commitments.forEach(function(t){r(t)}),r(t.ephemeralKey),r(t.randomSeed),t.macs.forEach(function(t){r(t)}),p(t.zproof.gA),p(t.zproof.gAPrime),d(t.zproof.gB),p(t.zproof.gBPrime),p(t.zproof.gC),p(t.zproof.gCPrime),p(t.zproof.gK),p(t.zproof.gH),t.ciphertexts.forEach(function(t){r(t)})}),this.joinsplits.length>0&&(r(this.joinsplitPubkey),r(this.joinsplitSig))),void 0!==e?t.slice(e,v):t},i.prototype.toHex=function(){return this.toBuffer().toString("hex")},i.prototype.setInputScript=function(t,e){a(c.tuple(c.Number,c.Buffer),arguments),this.ins[t].script=e},i.prototype.setWitness=function(t,e){a(c.tuple(c.Number,[c.Buffer]),arguments),this.ins[t].witness=e},t.exports=i}).call(e,n(0).Buffer)},function(t,e,n){"use strict";(function(t){var r=n(0),Buffer=r.Buffer,i=r.SlowBuffer,o=r.kMaxLength||2147483647;e.alloc=function(t,e,n){if("function"==typeof Buffer.alloc)return Buffer.alloc(t,e,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>o)throw new RangeError("size is too large");var r=n,i=e;void 0===i&&(r=void 0,i=0);var s=new Buffer(t);if("string"==typeof i)for(var u=new Buffer(i,r),f=u.length,a=-1;++a<t;)s[a]=u[a%f];else s.fill(i);return s},e.allocUnsafe=function(t){if("function"==typeof Buffer.allocUnsafe)return Buffer.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>o)throw new RangeError("size is too large");return new Buffer(t)},e.from=function(e,n,r){if("function"==typeof Buffer.from&&(!t.Uint8Array||Uint8Array.from!==Buffer.from))return Buffer.from(e,n,r);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new Buffer(e,n);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var i=n;if(1===arguments.length)return new Buffer(e);void 0===i&&(i=0);var o=r;if(void 0===o&&(o=e.byteLength-i),i>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(o>e.byteLength-i)throw new RangeError("'length' is out of bounds");return new Buffer(e.slice(i,i+o))}if(Buffer.isBuffer(e)){var s=new Buffer(e.length);return e.copy(s,0,0,e.length),s}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new Buffer(e);if("Buffer"===e.type&&Array.isArray(e.data))return new Buffer(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(t){if("function"==typeof Buffer.allocUnsafeSlow)return Buffer.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=o)throw new RangeError("size is too large");return new i(t)}}).call(e,n(9))},function(t,e,n){var Point=n(42),r=n(41),i=n(92);t.exports={Curve:r,Point:Point,getCurveByName:i}},function(t,e,n){"use strict";(function(e){function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,u=arguments.length;switch(u){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(u-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(e,n(7))},function(t,e,n){"use strict";function r(t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);u.call(this,t),this._transformState=new r(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(e)})}function s(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var u=n(8),f=n(13);f.inherits=n(4),f.inherits(o,u),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){"use strict";(function(e,r){function i(){}function o(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function s(t,e){T=T||n(8),t=t||{},this.objectMode=!!t.objectMode,e instanceof T&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){v(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function u(t){if(T=T||n(8),!(k.call(u,this)||this instanceof T))return new u(t);this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),A.call(this)}function f(t,e){var n=new Error("write after end");t.emit("error",n),P(e,n)}function a(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),P(r,o),i=!1),i}function c(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=x.from(e,n)),e}function h(t,e,n,r,i,s){n||(r=c(e,r,i),Buffer.isBuffer(r)&&(i="buffer"));var u=e.objectMode?1:r.length;e.length+=u;var f=e.length<e.highWaterMark;if(f||(e.needDrain=!0),e.writing||e.corked){var a=e.lastBufferedRequest;e.lastBufferedRequest=new o(r,i,s),a?a.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else l(t,e,!1,u,r,i,s);return f}function l(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function p(t,e,n,r,i){--e.pendingcb,n?P(i,r):i(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function v(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(d(n),e)p(t,n,r,e,i);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||m(t,n),r?O(g,t,n,o,i):g(t,n,o,i)}}function g(t,e,n,r){n||y(t,e),e.pendingcb--,r(),_(t,e)}function y(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;l(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new S(e)}else{for(;n;){var u=n.chunk,f=n.encoding,a=n.callback;if(l(t,e,!1,e.objectMode?1:u.length,u,f,a),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function b(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function _(t,e){var n=w(e);return n&&(0===e.pendingcb?(b(t,e),e.finished=!0,t.emit("finish")):b(t,e)),n}function E(t,e,n){e.ending=!0,_(t,e),n&&(e.finished?P(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function S(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}t.exports=u;var T,P=n(28),O=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:P;u.WritableState=s;var I=n(13);I.inherits=n(4);var A,B={deprecate:n(113)};!function(){try{A=n(14)}catch(t){}finally{A||(A=n(16).EventEmitter)}}();var Buffer=n(0).Buffer,x=n(26);I.inherits(u,A),s.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(s.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var k;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(t){return!!k.call(this,t)||t&&t._writableState instanceof s}})):k=function(t){return t instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(t,e,n){var r=this._writableState,o=!1,s=Buffer.isBuffer(t);return"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=i),r.ended?f(this,n):(s||a(this,r,t,n))&&(r.pendingcb++,o=h(this,r,s,t,e,n)),o},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||m(this,t))},u.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},u.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||E(this,r,n)}}).call(e,n(7),n(111).setImmediate)},function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var Buffer=n(0).Buffer,u=Buffer.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},f.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},f.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},function(t,e,n){"use strict";function r(t){var e=d+1;d++,h({type:"promiseRequest",request:t,id:e});var n=(0,l.deferred)();return v.attach(function(r,i){"promiseResponseSuccess"===r.type&&r.response.type===t.type&&r.id===e&&(i(),n.resolve(r.response.response)),"promiseResponseFailure"===r.type&&r.id===e&&(i(),n.reject(new Error(r.failure)))}),n.promise}function i(t){var e=d+1;return d++,h({type:"streamRequest",request:t,id:e}),new p.Stream(function(n,r){var i=function(){};return v.attach(function(o,s){i=s,"streamResponseUpdate"===o.type&&o.update.type===t.type&&o.id===e&&n(o.update.response),"streamResponseFinish"===o.type&&o.id===e&&(s(),r())}),function(){i()}})}function o(){return r({type:"lookupSyncStatus"})}function s(t){return r({type:"lookupBlockHash",height:t})}function u(t){return r({type:"doesTransactionExist",txid:t})}function f(t,e,n,r,o,s,u){return i({type:"chunkTransactions",chainId:t,firstIndex:e,lastIndex:n,startBlock:r,endBlock:o,pseudoCount:s,addresses:u}).map(function(t){return"string"==typeof t?new Error(t):t})}function a(t){h({type:"result",result:t})}function c(t){h({type:"error",error:t instanceof Error?t.message:t.toString()})}function h(t){self.postMessage(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.startDiscoveryPromise=e.initPromise=void 0,e.lookupSyncStatus=o,e.lookupBlockHash=s,e.doesTransactionExist=u,e.chunkTransactions=f,e.returnSuccess=a,e.returnError=c;var l=n(19),p=n(33),d=0,v=new p.Emitter;self.onmessage=function(t){var e=t.data;v.emit(e)};var g=(0,l.deferred)();e.initPromise=g.promise;v.attach(function(t,e){"init"===t.type&&(e(),g.resolve({accountInfo:t.state,network:t.network}))});var y=(0,l.deferred)();e.startDiscoveryPromise=y.promise;v.attach(function(t,e){"startDiscovery"===t.type&&(e(),y.resolve())})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.StreamWithEnding=e.Stream=e.Queue=e.Emitter=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(19),s=e.Emitter=function(){function t(){r(this,t),this.listeners=[]}return i(t,[{key:"destroy",value:function(){var t=this;this.listeners.forEach(function(e){return t.detach(e.handler)}),this.listeners=[]}},{key:"attach",value:function(t){this.listeners=this.listeners.concat([{handler:t,detached:!1}])}},{key:"detach",value:function(t){this.listeners=this.listeners.filter(function(e){return e.handler!==t||(e.detached=!0,!1)})}},{key:"emit",value:function(t){var e=this;this.listeners.forEach(function(n){n.detached||n.handler(t,function(){e.detach(n.handler)})})}}]),t}(),u=(e.Queue=function(){function t(){r(this,t),this.buffer=[],this.takers=[]}return i(t,[{key:"put",value:function(t){this.buffer.push(t),this.shift()}},{key:"take",value:function(t){this.takers.push(t),this.shift()}},{key:"shift",value:function(){if(this.buffer.length>0&&this.takers.length>0){var t=this.buffer.shift();this.takers.shift()(t)}}}]),t}(),function(){function t(e){var n=this;r(this,t),this.values=new s,this.finish=new s,this.dispose=e(function(t){n.values.emit(t)},function(){n.finish.emit()})}return i(t,null,[{key:"fromEmitter",value:function(e,n){return new t(function(t,r){var i=!1,o=function(e){i||t(e)};return e.attach(o),function(){i=!0,e.detach(o),n()}})}},{key:"fromEmitterFinish",value:function(e,n,r){return new t(function(t,i){var o=!1,s=function(e){o||t(e)};return e.attach(s),n.attach(function(t,n){i(),n(),e.detach(s)}),function(){o=!0,e.detach(s),r()}})}},{key:"fromArray",value:function(e){return new t(function(t,n){var r=!1;return setTimeout(function(){r||(e.forEach(function(e){t(e)}),n())},0),function(){r=!0}})}},{key:"fromPromise",value:function(e){return new t(function(t,n){var r=void 0,i=!1;return e.then(function(e){i||(e.values.attach(function(e){return t(e)}),e.finish.attach(function(){return n()}),r=e)},function(){setTimeout(function(){return n()},1)}),function(){i=!0,null!=r&&r.dispose()}})}},{key:"generate",value:function(e,n,r){return new t(function(t,i){var o=!1;return function e(s){n(s).then(function(n){o||(t(n),r(n)?e(n):i(n))})}(e),function(){o=!0}})}},{key:"setLater",value:function(){var e=(0,o.deferred)(),n=!1,r=function(t){if(n)throw new Error("Setting stream twice.");n=!0,e.resolve(t)};return{stream:new t(function(t,n){var r=null;return e.promise.then(function(e){r=e,e.values.attach(function(e){t(e)}),e.finish.attach(function(){n()})}),function(){null!=r&&r.dispose()}}),setter:r}}},{key:"simple",value:function(e){return new t(function(t,n){var r=!1;return setTimeout(function(){r||(t(e),setTimeout(function(){r||n()},1))},1),function(){r=!0}})}},{key:"combine",value:function(e){return new t(function(t,n){var r=new Array(e.length),i=new Set,o=new Set;return e.forEach(function(s,u){s.values.attach(function(n){r[u]=n,i.add(u),i.size>=e.length&&t(r)}),s.finish.attach(function(){o.add(u),o.size>=e.length&&n()})}),function(){e.forEach(function(t){return t.dispose()})}})}},{key:"combineFlat",value:function(e){return new t(function(t,n){var r=new Set;return e.forEach(function(i,o){i.values.attach(function(e){t(e)}),i.finish.attach(function(){r.add(o),r.size>=e.length&&n()})}),function(){e.forEach(function(t){return t.dispose()})}})}},{key:"filterNull",value:function(e){return new t(function(t,n){return e.values.attach(function(e){null!=e&&t(e)}),e.finish.attach(n),e.dispose})}}]),i(t,[{key:"awaitFirst",value:function(){var t=this;return new Promise(function(e,n){var r=function(){},i=function n(i){t.values.detach(n),t.finish.detach(r),e(i)};r=function(){t.values.detach(i),t.finish.detach(r),n(new Error("No first value."))},t.values.attach(i),t.finish.attach(r)})}},{key:"awaitFinish",value:function(){var t=this;return new Promise(function(e){var n=function n(r){t.finish.detach(n),e()};t.finish.attach(n)})}},{key:"awaitLast",value:function(){var t=this;return new Promise(function(e,n){var r=void 0,i=function(t){r=t},o=function o(s){t.values.detach(i),t.finish.detach(o),null==r?n(new Error("No last value.")):e(r)};t.values.attach(i),t.finish.attach(o)})}},{key:"map",value:function(e){var n=this;return new t(function(t,r){return n.values.attach(function(n){t(e(n))}),n.finish.attach(r),n.dispose})}},{key:"mapPromise",value:function(e){var n=this;return new t(function(t,r){var i=Promise.resolve(),o=!1;return n.values.attach(function(n){var r=i;i=e(n).then(function(e){r.then(function(){o||t(e)})})}),n.finish.attach(function(){i.then(function(){return r()})}),function(){o=!0,n.dispose()}})}},{key:"mapPromiseError",value:function(e){var n=this;return new t(function(t,r){var i=Promise.resolve(),o=!1;return n.values.attach(function(n){var r=i;i=e(n).then(function(e){r.then(function(){o||t(e)})},function(e){r.then(function(){o||t(e)})})}),n.finish.attach(function(){i.then(function(){return r()})}),function(){o=!0,n.dispose()}})}},{key:"filter",value:function(e){var n=this;return new t(function(t,r){return n.values.attach(function(n){e(n)&&t(n)}),n.finish.attach(r),n.dispose})}},{key:"reduce",value:function(t,e){var n=this;return new Promise(function(r,i){var o=e;n.values.attach(function(e){o=t(o,e)}),n.finish.attach(function(){r(o)})})}},{key:"concat",value:function(e){var n=this;return new t(function(t,r){var i=0;n.values.attach(function(e){t(e)}),e.values.attach(function(e){t(e)});var o=function(){2===++i&&r()};return n.finish.attach(o),e.finish.attach(o),function(){n.dispose(),e.dispose()}})}}]),t}());e.Stream=u;e.StreamWithEnding=function(){function t(){r(this,t)}return i(t,null,[{key:"fromStreamAndPromise",value:function(e,n){var r=new t;r.stream=e;var i=(0,o.deferred)();return r.dispose=function(t){i.reject(t),e.dispose()},e.awaitFinish().then(function(){i.resolve()}),r.ending=i.promise.then(function(){return n}),r}}]),t}()},function(t,e,n){function BigInteger(t,e,n){if(!(this instanceof BigInteger))return new BigInteger(t,e,n);null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function r(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i}function i(t){return ie.charAt(t)}function o(t,e){var n=oe[t.charCodeAt(e)];return null==n?-1:n}function s(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+te:this.t=0}function f(t){var e=new BigInteger;return e.fromInt(t),e}function a(t,e){var n,r=this;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void r.fromRadix(t,e);n=2}r.t=0,r.s=0;for(var i=t.length,s=!1,u=0;--i>=0;){var f=8==n?255&t[i]:o(t,i);f<0?"-"==t.charAt(i)&&(s=!0):(s=!1,0==u?r[r.t++]=f:u+n>r.DB?(r[r.t-1]|=(f&(1<<r.DB-u)-1)<<u,r[r.t++]=f>>r.DB-u):r[r.t-1]|=f<<u,(u+=n)>=r.DB&&(u-=r.DB))}8==n&&0!=(128&t[0])&&(r.s=-1,u>0&&(r[r.t-1]|=(1<<r.DB-u)-1<<u)),r.clamp(),s&&BigInteger.ZERO.subTo(r,r)}function c(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function h(t){var e=this;if(e.s<0)return"-"+e.negate().toString(t);var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return e.toRadix(t);n=2}var r,o=(1<<n)-1,s=!1,u="",f=e.t,a=e.DB-f*e.DB%n;if(f-- >0)for(a<e.DB&&(r=e[f]>>a)>0&&(s=!0,u=i(r));f>=0;)a<n?(r=(e[f]&(1<<a)-1)<<n-a,r|=e[--f]>>(a+=e.DB-n)):(r=e[f]>>(a-=n)&o,a<=0&&(a+=e.DB,--f)),r>0&&(s=!0),s&&(u+=i(r));return s?u:"0"}function l(){var t=new BigInteger;return BigInteger.ZERO.subTo(this,t),t}function p(){return this.s<0?this.negate():this}function d(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function v(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function g(){return this.t<=0?0:this.DB*(this.t-1)+v(this[this.t-1]^this.s&this.DM)}function y(){return this.bitLength()>>3}function m(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function w(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function b(t,e){var n,r=this,i=t%r.DB,o=r.DB-i,s=(1<<o)-1,u=Math.floor(t/r.DB),f=r.s<<i&r.DM;for(n=r.t-1;n>=0;--n)e[n+u+1]=r[n]>>o|f,f=(r[n]&s)<<i;for(n=u-1;n>=0;--n)e[n]=0;e[u]=f,e.t=r.t+u+1,e.s=r.s,e.clamp()}function _(t,e){var n=this;e.s=n.s;var r=Math.floor(t/n.DB);if(r>=n.t)return void(e.t=0);var i=t%n.DB,o=n.DB-i,s=(1<<i)-1;e[0]=n[r]>>i;for(var u=r+1;u<n.t;++u)e[u-r-1]|=(n[u]&s)<<o,e[u-r]=n[u]>>i;i>0&&(e[n.t-r-1]|=(n.s&s)<<o),e.t=n.t-r,e.clamp()}function E(t,e){for(var n=this,r=0,i=0,o=Math.min(t.t,n.t);r<o;)i+=n[r]-t[r],e[r++]=i&n.DM,i>>=n.DB;if(t.t<n.t){for(i-=t.s;r<n.t;)i+=n[r],e[r++]=i&n.DM,i>>=n.DB;i+=n.s}else{for(i+=n.s;r<t.t;)i-=t[r],e[r++]=i&n.DM,i>>=n.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[r++]=n.DV+i:i>0&&(e[r++]=i),e.t=r,e.clamp()}function S(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)}function T(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function P(t,e,n){var r=this,i=t.abs();if(!(i.t<=0)){var o=r.abs();if(o.t<i.t)return null!=e&&e.fromInt(0),void(null!=n&&r.copyTo(n));null==n&&(n=new BigInteger);var s=new BigInteger,u=r.s,f=t.s,a=r.DB-v(i[i.t-1]);a>0?(i.lShiftTo(a,s),o.lShiftTo(a,n)):(i.copyTo(s),o.copyTo(n));var c=s.t,h=s[c-1];if(0!=h){var l=h*(1<<r.F1)+(c>1?s[c-2]>>r.F2:0),p=r.FV/l,d=(1<<r.F1)/l,g=1<<r.F2,y=n.t,m=y-c,w=null==e?new BigInteger:e;for(s.dlShiftTo(m,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),BigInteger.ONE.dlShiftTo(c,w),w.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--m>=0;){var b=n[--y]==h?r.DM:Math.floor(n[y]*p+(n[y-1]+g)*d);if((n[y]+=s.am(0,b,n,m,0,c))<b)for(s.dlShiftTo(m,w),n.subTo(w,n);n[y]<--b;)n.subTo(w,n)}null!=e&&(n.drShiftTo(c,e),u!=f&&BigInteger.ZERO.subTo(e,e)),n.t=c,n.clamp(),a>0&&n.rShiftTo(a,n),u<0&&BigInteger.ZERO.subTo(n,n)}}}function O(t){var e=new BigInteger;return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger.ZERO)>0&&t.subTo(e,e),e}function I(t){this.m=t}function A(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function B(t){return t}function x(t){t.divRemTo(this.m,null,t)}function k(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function R(t,e){t.squareTo(e),this.reduce(e)}function U(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function L(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function N(t){var e=new BigInteger;return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger.ZERO)>0&&this.m.subTo(e,e),e}function H(t){var e=new BigInteger;return t.copyTo(e),this.reduce(e),e}function D(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function M(t,e){t.squareTo(e),this.reduce(e)}function C(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function j(){return 0==(this.t>0?1&this[0]:this.s)}function K(t,e){if(t>4294967295||t<1)return BigInteger.ONE;var n=new BigInteger,r=new BigInteger,i=e.convert(this),o=v(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var s=n;n=r,r=s}return e.revert(n)}function F(t,e){var n;return n=t<256||e.isEven()?new I(e):new L(e),this.exp(t,n)}function z(){var t=new BigInteger;return this.copyTo(t),t}function q(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function G(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function V(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function J(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=f(n),i=new BigInteger,o=new BigInteger,s="";for(this.divRemTo(r,i,o);i.signum()>0;)s=(n+o.intValue()).toString(t).substr(1)+s,i.divRemTo(r,i,o);return o.intValue().toString(t)+s}function Z(t,e){var n=this;n.fromInt(0),null==e&&(e=10);for(var r=n.chunkSize(e),i=Math.pow(e,r),s=!1,u=0,f=0,a=0;a<t.length;++a){var c=o(t,a);c<0?"-"==t.charAt(a)&&0==n.signum()&&(s=!0):(f=e*f+c,++u>=r&&(n.dMultiply(i),n.dAddOffset(f,0),u=0,f=0))}u>0&&(n.dMultiply(Math.pow(e,u)),n.dAddOffset(f,0)),s&&BigInteger.ZERO.subTo(n,n)}function Q(t,e,n){var r=this;if("number"==typeof e)if(t<2)r.fromInt(1);else for(r.fromNumber(t,n),r.testBit(t-1)||r.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),ot,r),r.isEven()&&r.dAddOffset(1,0);!r.isProbablePrime(e);)r.dAddOffset(2,0),r.bitLength()>t&&r.subTo(BigInteger.ONE.shiftLeft(t-1),r);else{var i=new Array,o=7&t;i.length=1+(t>>3),e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,r.fromString(i,256)}}function X(){var t=this,e=t.t,n=new Array;n[0]=t.s;var r,i=t.DB-e*t.DB%8,o=0;if(e-- >0)for(i<t.DB&&(r=t[e]>>i)!=(t.s&t.DM)>>i&&(n[o++]=r|t.s<<t.DB-i);e>=0;)i<8?(r=(t[e]&(1<<i)-1)<<8-i,r|=t[--e]>>(i+=t.DB-8)):(r=t[e]>>(i-=8)&255,i<=0&&(i+=t.DB,--e)),0!=(128&r)&&(r|=-256),0===o&&(128&t.s)!=(128&r)&&++o,(o>0||r!=t.s)&&(n[o++]=r);return n}function $(t){return 0==this.compareTo(t)}function tt(t){return this.compareTo(t)<0?this:t}function et(t){return this.compareTo(t)>0?this:t}function nt(t,e,n){var r,i,o=this,s=Math.min(t.t,o.t);for(r=0;r<s;++r)n[r]=e(o[r],t[r]);if(t.t<o.t){for(i=t.s&o.DM,r=s;r<o.t;++r)n[r]=e(o[r],i);n.t=o.t}else{for(i=o.s&o.DM,r=s;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(o.s,t.s),n.clamp()}function rt(t,e){return t&e}function it(t){var e=new BigInteger;return this.bitwiseTo(t,rt,e),e}function ot(t,e){return t|e}function st(t){var e=new BigInteger;return this.bitwiseTo(t,ot,e),e}function ut(t,e){return t^e}function ft(t){var e=new BigInteger;return this.bitwiseTo(t,ut,e),e}function at(t,e){return t&~e}function ct(t){var e=new BigInteger;return this.bitwiseTo(t,at,e),e}function ht(){for(var t=new BigInteger,e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function lt(t){var e=new BigInteger;return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function pt(t){var e=new BigInteger;return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function dt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function vt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+dt(this[t]);return this.s<0?this.t*this.DB:-1}function gt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function yt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=gt(this[n]^e);return t}function mt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function wt(t,e){var n=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function bt(t){return this.changeBit(t,ot)}function _t(t){return this.changeBit(t,at)}function Et(t){return this.changeBit(t,ut)}function St(t,e){for(var n=this,r=0,i=0,o=Math.min(t.t,n.t);r<o;)i+=n[r]+t[r],e[r++]=i&n.DM,i>>=n.DB;if(t.t<n.t){for(i+=t.s;r<n.t;)i+=n[r],e[r++]=i&n.DM,i>>=n.DB;i+=n.s}else{for(i+=n.s;r<t.t;)i+=t[r],e[r++]=i&n.DM,i>>=n.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[r++]=i:i<-1&&(e[r++]=n.DV+i),e.t=r,e.clamp()}function Tt(t){var e=new BigInteger;return this.addTo(t,e),e}function Pt(t){var e=new BigInteger;return this.subTo(t,e),e}function Ot(t){var e=new BigInteger;return this.multiplyTo(t,e),e}function It(){var t=new BigInteger;return this.squareTo(t),t}function At(t){var e=new BigInteger;return this.divRemTo(t,e,null),e}function Bt(t){var e=new BigInteger;return this.divRemTo(t,null,e),e}function xt(t){var e=new BigInteger,n=new BigInteger;return this.divRemTo(t,e,n),new Array(e,n)}function kt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Rt(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Ut(){}function Lt(t){return t}function Nt(t,e,n){t.multiplyTo(e,n)}function Ht(t,e){t.squareTo(e)}function Dt(t){return this.exp(t,new Ut)}function Mt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function Ct(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function jt(t){this.r2=new BigInteger,this.q3=new BigInteger,BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Kt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=new BigInteger;return t.copyTo(e),this.reduce(e),e}function Ft(t){return t}function zt(t){var e=this;for(t.drShiftTo(e.m.t-1,e.r2),t.t>e.m.t+1&&(t.t=e.m.t+1,t.clamp()),e.mu.multiplyUpperTo(e.r2,e.m.t+1,e.q3),e.m.multiplyLowerTo(e.q3,e.m.t+1,e.r2);t.compareTo(e.r2)<0;)t.dAddOffset(1,e.m.t+1);for(t.subTo(e.r2,t);t.compareTo(e.m)>=0;)t.subTo(e.m,t)}function qt(t,e){t.squareTo(e),this.reduce(e)}function Gt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Wt(t,e){var n,r,i=t.bitLength(),o=f(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new I(e):e.isEven()?new jt(e):new L(e);var s=new Array,u=3,a=n-1,c=(1<<n)-1;if(s[1]=r.convert(this),n>1){var h=new BigInteger;for(r.sqrTo(s[1],h);u<=c;)s[u]=new BigInteger,r.mulTo(h,s[u-2],s[u]),u+=2}var l,p,d=t.t-1,g=!0,y=new BigInteger;for(i=v(t[d])-1;d>=0;){for(i>=a?l=t[d]>>i-a&c:(l=(t[d]&(1<<i+1)-1)<<a-i,d>0&&(l|=t[d-1]>>this.DB+i-a)),u=n;0==(1&l);)l>>=1,--u;if((i-=u)<0&&(i+=this.DB,--d),g)s[l].copyTo(o),g=!1;else{for(;u>1;)r.sqrTo(o,y),r.sqrTo(y,o),u-=2;u>0?r.sqrTo(o,y):(p=o,o=y,y=p),r.mulTo(y,s[l],o)}for(;d>=0&&0==(t[d]&1<<i);)r.sqrTo(o,y),p=o,o=y,y=p,--i<0&&(i=this.DB-1,--d)}return r.revert(o)}function Vt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Yt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function Jt(t){var e=t.isEven();if(0===this.signum())throw new Error("division by zero");if(this.isEven()&&e||0==t.signum())return BigInteger.ZERO;for(var n=t.clone(),r=this.clone(),i=f(1),o=f(0),s=f(0),u=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(s,i),o.subTo(u,o)):(r.subTo(n,r),e&&s.subTo(i,s),u.subTo(o,u))}if(0!=r.compareTo(BigInteger.ONE))return BigInteger.ZERO;for(;u.compareTo(t)>=0;)u.subTo(t,u);for(;u.signum()<0;)u.addTo(t,u);return u}function Zt(t){var e,n=this.abs();if(1==n.t&&n[0]<=se[se.length-1]){for(e=0;e<se.length;++e)if(n[0]==se[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<se.length;){for(var r=se[e],i=e+1;i<se.length&&r<ue;)r*=se[i++];for(r=n.modInt(r);e<i;)if(r%se[e++]==0)return!1}return n.millerRabin(t)}function Qt(t){var e=this.subtract(BigInteger.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>se.length&&(t=se.length);for(var i,o=new BigInteger(null),s=[],u=0;u<t;++u){for(;i=se[Math.floor(Math.random()*se.length)],s.indexOf(i)!=-1;);s.push(i),o.fromInt(i);var f=o.modPow(r,this);if(0!=f.compareTo(BigInteger.ONE)&&0!=f.compareTo(e)){for(var i=1;i++<n&&0!=f.compareTo(e);)if(f=f.modPowInt(2,this),0==f.compareTo(BigInteger.ONE))return!1;if(0!=f.compareTo(e))return!1}}return!0}var Xt=BigInteger.prototype;Xt.__bigi=n(94).version,BigInteger.isBigInteger=function(t,e){return t&&t.__bigi&&(!e||t.__bigi===Xt.__bigi)};var $t;BigInteger.prototype.am=r,$t=26,BigInteger.prototype.DB=$t,BigInteger.prototype.DM=(1<<$t)-1;var te=BigInteger.prototype.DV=1<<$t,ee=52;BigInteger.prototype.FV=Math.pow(2,ee),BigInteger.prototype.F1=ee-$t,BigInteger.prototype.F2=2*$t-ee;var ne,re,ie="0123456789abcdefghijklmnopqrstuvwxyz",oe=new Array;for(ne="0".charCodeAt(0),re=0;re<=9;++re)oe[ne++]=re;for(ne="a".charCodeAt(0),re=10;re<36;++re)oe[ne++]=re;for(ne="A".charCodeAt(0),re=10;re<36;++re)oe[ne++]=re;I.prototype.convert=A,I.prototype.revert=B,I.prototype.reduce=x,I.prototype.mulTo=k,I.prototype.sqrTo=R,L.prototype.convert=N,L.prototype.revert=H,L.prototype.reduce=D,L.prototype.mulTo=C,L.prototype.sqrTo=M,Xt.copyTo=s,Xt.fromInt=u,Xt.fromString=a,Xt.clamp=c,Xt.dlShiftTo=m,Xt.drShiftTo=w,Xt.lShiftTo=b,Xt.rShiftTo=_,Xt.subTo=E,Xt.multiplyTo=S,Xt.squareTo=T,Xt.divRemTo=P,Xt.invDigit=U,Xt.isEven=j,Xt.exp=K,Xt.toString=h,Xt.negate=l,Xt.abs=p,Xt.compareTo=d,Xt.bitLength=g,Xt.byteLength=y,Xt.mod=O,Xt.modPowInt=F,Ut.prototype.convert=Lt,Ut.prototype.revert=Lt,Ut.prototype.mulTo=Nt,Ut.prototype.sqrTo=Ht,jt.prototype.convert=Kt,jt.prototype.revert=Ft,jt.prototype.reduce=zt,jt.prototype.mulTo=Gt,jt.prototype.sqrTo=qt;var se=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ue=(1<<26)/se[se.length-1];Xt.chunkSize=V,Xt.toRadix=J,Xt.fromRadix=Z,Xt.fromNumber=Q,Xt.bitwiseTo=nt,Xt.changeBit=wt,Xt.addTo=St,Xt.dMultiply=kt,Xt.dAddOffset=Rt,Xt.multiplyLowerTo=Mt,Xt.multiplyUpperTo=Ct,Xt.modInt=Yt,Xt.millerRabin=Qt,Xt.clone=z,Xt.intValue=q,Xt.byteValue=G,Xt.shortValue=W,Xt.signum=Y,Xt.toByteArray=X,Xt.equals=$,Xt.min=tt,Xt.max=et,Xt.and=it,Xt.or=st,Xt.xor=ft,Xt.andNot=ct,Xt.not=ht,Xt.shiftLeft=lt,Xt.shiftRight=pt,Xt.getLowestSetBit=vt,Xt.bitCount=yt,Xt.testBit=mt,Xt.setBit=bt,Xt.clearBit=_t,Xt.flipBit=Et,Xt.add=Tt,Xt.subtract=Pt,Xt.multiply=Ot,Xt.divide=At,Xt.remainder=Bt,Xt.divideAndRemainder=xt,Xt.modPow=Wt,Xt.modInverse=Jt,Xt.pow=Dt,Xt.gcd=Vt,Xt.isProbablePrime=Zt,Xt.square=It,BigInteger.ZERO=f(0),BigInteger.ONE=f(1),BigInteger.valueOf=f,t.exports=BigInteger},function(t,e,n){(function(Buffer){function e(t){if(t.length<8)return!1;if(t.length>72)return!1;if(48!==t[0])return!1;if(t[1]!==t.length-2)return!1;if(2!==t[2])return!1;var e=t[3];if(0===e)return!1;if(5+e>=t.length)return!1;if(2!==t[4+e])return!1;var n=t[5+e];return 0!==n&&(6+e+n===t.length&&(!(128&t[4])&&(!(e>1&&0===t[4]&&!(128&t[5]))&&(!(128&t[e+6])&&!(n>1&&0===t[e+6]&&!(128&t[e+7]))))))}function n(t){if(t.length<8)throw new Error("DER sequence length is too short");if(t.length>72)throw new Error("DER sequence length is too long");if(48!==t[0])throw new Error("Expected DER sequence");if(t[1]!==t.length-2)throw new Error("DER sequence length is invalid");if(2!==t[2])throw new Error("Expected DER integer");var e=t[3];if(0===e)throw new Error("R length is zero");if(5+e>=t.length)throw new Error("R length is too long");if(2!==t[4+e])throw new Error("Expected DER integer (2)");var n=t[5+e];if(0===n)throw new Error("S length is zero");if(6+e+n!==t.length)throw new Error("S length is invalid");if(128&t[4])throw new Error("R value is negative");if(e>1&&0===t[4]&&!(128&t[5]))throw new Error("R value excessively padded");if(128&t[e+6])throw new Error("S value is negative");if(n>1&&0===t[e+6]&&!(128&t[e+7]))throw new Error("S value excessively padded");return{r:t.slice(4,4+e),s:t.slice(6+e)}}function r(t,e){var n=t.length,r=e.length;if(0===n)throw new Error("R length is zero");if(0===r)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(r>33)throw new Error("S length is too long");if(128&t[0])throw new Error("R value is negative");if(128&e[0])throw new Error("S value is negative");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("R value excessively padded");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("S value excessively padded");var i=new Buffer(6+n+r);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=t.length,t.copy(i,4),i[4+n]=2,i[5+n]=e.length,e.copy(i,6+n),i}t.exports={check:e,decode:n,encode:r}}).call(e,n(0).Buffer)},function(t,e,n){"use strict";(function(Buffer){function e(t){var e=f("sha256").update(t).digest();return f("sha256").update(e).digest()}function r(t){var n=e(t);return u.encode(Buffer.concat([t,n],t.length+4))}function i(t){var n=t.slice(0,-4),r=t.slice(-4),i=e(n);if(!(r[0]^i[0]|r[1]^i[1]|r[2]^i[2]|r[3]^i[3]))return n}function o(t){var e=u.decodeUnsafe(t);if(e)return i(e)}function s(t){var e=u.decode(t),n=i(e);if(!n)throw new Error("Invalid checksum");return n}var u=n(62),f=n(15);t.exports={encode:r,decode:s,decodeUnsafe:o,decodeRaw:o}}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(t,e,n){e=e||4,n=void 0===n||n;var r=t.length;if(0===r)return 0;if(r>e)throw new TypeError("Script number overflow");if(n&&0==(127&t[r-1])&&(r<=1||0==(128&t[r-2])))throw new Error("Non-minimally encoded script number");if(5===r){var i=t.readUInt32LE(0),o=t.readUInt8(4);return 128&o?-(4294967296*(o&-129)+i):4294967296*o+i}for(var s=0,u=0;u<r;++u)s|=t[u]<<8*u;return 128&t[r-1]?-(s&~(128<<8*(r-1))):s}function n(t){return t>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0}function r(t){for(var e=Math.abs(t),r=n(e),i=new Buffer(r),o=t<0,s=0;s<r;++s)i.writeUInt8(255&e,s),e>>=8;return 128&i[r-1]?i.writeUInt8(o?128:0,r-1):o&&(i[r-1]|=128),i}t.exports={decode:e,encode:r}}).call(e,n(0).Buffer)},function(t,e,n){function r(t){var e=f.decompile(t);return 2===e.length&&f.isCanonicalSignature(e[0])&&f.isCanonicalPubKey(e[1])}function i(t,e){return c({signature:a.Buffer,pubKey:a.Buffer},{signature:t,pubKey:e}),[t,e]}function o(t,e){return f.compile(i(t,e))}function s(t){return c(r,t),{signature:t[0],pubKey:t[1]}}function u(t){return s(f.decompile(t))}var f=n(3),a=n(2),c=n(1);r.toJSON=function(){return"pubKeyHash input"},t.exports={check:r,decode:u,decodeStack:s,encode:o,encodeStack:i}},function(t,e,n){(function(Buffer){function e(t,e){var n=u.decompile(t);if(n.length<1)return!1;var r=n[n.length-1];if(!Buffer.isBuffer(r))return!1;var i=u.decompile(u.compile(n.slice(0,-1))),o=u.decompile(r);if(0===o.length)return!1;if(!u.isPushOnly(i))return!1;var s=u.classifyInput(i,e),f=u.classifyOutput(o);return 1===n.length?f===u.types.P2WSH||f===u.types.P2WPKH:s===f}function r(t,e){var n=u.compile(e);return[].concat(t,n)}function i(t,e){var n=u.decompile(t);return u.compile(r(n,e))}function o(t){return f(e,t),{redeemScriptStack:t.slice(0,-1),redeemScript:t[t.length-1]}}function s(t){var e=u.decompile(t),n=o(e);return n.redeemScriptSig=u.compile(n.redeemScriptStack),delete n.redeemScriptStack,n}var u=n(3),f=n(1);e.toJSON=function(){return"scriptHash input"},t.exports={check:e,decode:s,decodeStack:o,encode:i,encodeStack:r}}).call(e,n(0).Buffer)},function(t,e,n){"use strict";(function(Buffer){function e(t,e){o.call(this),t=t.toLowerCase(),"string"==typeof e&&(e=new Buffer(e));var n="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>n?e=r(t).update(e).digest():e.length<n&&(e=Buffer.concat([e,s],n));for(var i=this._ipad=new Buffer(n),u=this._opad=new Buffer(n),f=0;f<n;f++)i[f]=54^e[f],u[f]=92^e[f];this._hash=r(t).update(i)}var r=n(15),i=n(4),o=n(14).Transform,s=new Buffer(128);s.fill(0),i(e,o),e.prototype.update=function(t,e){return this._hash.update(t,e),this},e.prototype._transform=function(t,e,n){this._hash.update(t),n()},e.prototype._flush=function(t){this.push(this.digest()),t()},e.prototype.digest=function(t){var e=this._hash.digest();return r(this._alg).update(this._opad).update(e).digest(t)},t.exports=function(t,n){return new e(t,n)}}).call(e,n(0).Buffer)},function(t,e,n){function r(t,e,n,r,i,o,s){this.p=t,this.a=e,this.b=n,this.G=Point.fromAffine(this,r,i),this.n=o,this.h=s,this.infinity=new Point(this,null,null,BigInteger.ZERO),this.pOverFour=t.add(BigInteger.ONE).shiftRight(2),this.pLength=Math.floor((this.p.bitLength()+7)/8)}var i=n(17),BigInteger=n(6),Point=n(42);r.prototype.pointFromX=function(t,e){var n=e.pow(3).add(this.a.multiply(e)).add(this.b).mod(this.p),r=n.modPow(this.pOverFour,this.p),i=r;return r.isEven()^!t&&(i=this.p.subtract(i)),Point.fromAffine(this,e,i)},r.prototype.isInfinity=function(t){return t===this.infinity||0===t.z.signum()&&0!==t.y.signum()},r.prototype.isOnCurve=function(t){if(this.isInfinity(t))return!0;var e=t.affineX,n=t.affineY,r=this.a,i=this.b,o=this.p;if(e.signum()<0||e.compareTo(o)>=0)return!1;if(n.signum()<0||n.compareTo(o)>=0)return!1;var s=n.square().mod(o),u=e.pow(3).add(r.multiply(e)).add(i).mod(o);return s.equals(u)},r.prototype.validate=function(t){i(!this.isInfinity(t),"Point is at infinity"),i(this.isOnCurve(t),"Point is not on the curve");var e=t.multiply(this.n);return i(this.isInfinity(e),"Point is not a scalar multiple of G"),!0},t.exports=r},function(t,e,n){(function(Buffer){function Point(t,n,r,i){e.notStrictEqual(i,void 0,"Missing Z coordinate"),this.curve=t,this.x=n,this.y=r,this.z=i,this._zInv=null,this.compressed=!0}var e=n(17),BigInteger=n(6),r=BigInteger.valueOf(3);Object.defineProperty(Point.prototype,"zInv",{get:function(){return null===this._zInv&&(this._zInv=this.z.modInverse(this.curve.p)),this._zInv}}),Object.defineProperty(Point.prototype,"affineX",{get:function(){return this.x.multiply(this.zInv).mod(this.curve.p)}}),Object.defineProperty(Point.prototype,"affineY",{get:function(){return this.y.multiply(this.zInv).mod(this.curve.p)}}),Point.fromAffine=function(t,e,n){return new Point(t,e,n,BigInteger.ONE)},Point.prototype.equals=function(t){return t===this||(this.curve.isInfinity(this)?this.curve.isInfinity(t):this.curve.isInfinity(t)?this.curve.isInfinity(this):0===t.y.multiply(this.z).subtract(this.y.multiply(t.z)).mod(this.curve.p).signum()&&0===t.x.multiply(this.z).subtract(this.x.multiply(t.z)).mod(this.curve.p).signum())},Point.prototype.negate=function(){var t=this.curve.p.subtract(this.y);return new Point(this.curve,this.x,t,this.z)},Point.prototype.add=function(t){if(this.curve.isInfinity(this))return t;if(this.curve.isInfinity(t))return this;var e=this.x,n=this.y,i=t.x,o=t.y,s=o.multiply(this.z).subtract(n.multiply(t.z)).mod(this.curve.p),u=i.multiply(this.z).subtract(e.multiply(t.z)).mod(this.curve.p);if(0===u.signum())return 0===s.signum()?this.twice():this.curve.infinity;var f=u.square(),a=f.multiply(u),c=e.multiply(f),h=s.square().multiply(this.z),l=h.subtract(c.shiftLeft(1)).multiply(t.z).subtract(a).multiply(u).mod(this.curve.p),p=c.multiply(r).multiply(s).subtract(n.multiply(a)).subtract(h.multiply(s)).multiply(t.z).add(s.multiply(a)).mod(this.curve.p),d=a.multiply(this.z).multiply(t.z).mod(this.curve.p);return new Point(this.curve,l,p,d)},Point.prototype.twice=function(){if(this.curve.isInfinity(this))return this;if(0===this.y.signum())return this.curve.infinity;var t=this.x,e=this.y,n=e.multiply(this.z).mod(this.curve.p),i=n.multiply(e).mod(this.curve.p),o=this.curve.a,s=t.square().multiply(r);0!==o.signum()&&(s=s.add(this.z.square().multiply(o))),s=s.mod(this.curve.p);var u=s.square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.p),f=s.multiply(r).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.pow(3)).mod(this.curve.p),a=n.pow(3).shiftLeft(3).mod(this.curve.p);return new Point(this.curve,u,f,a)},Point.prototype.multiply=function(t){if(this.curve.isInfinity(this))return this;if(0===t.signum())return this.curve.infinity;for(var e=t,n=e.multiply(r),i=this.negate(),o=this,s=n.bitLength()-2;s>0;--s){var u=n.testBit(s),f=e.testBit(s);o=o.twice(),u!==f&&(o=o.add(u?this:i))}return o},Point.prototype.multiplyTwo=function(t,e,n){for(var r=Math.max(t.bitLength(),n.bitLength())-1,i=this.curve.infinity,o=this.add(e);r>=0;){var s=t.testBit(r),u=n.testBit(r);i=i.twice(),s?i=u?i.add(o):i.add(this):u&&(i=i.add(e)),--r}return i},Point.prototype.getEncoded=function(t){if(null==t&&(t=this.compressed),this.curve.isInfinity(this))return new Buffer("00","hex");var e,n=this.affineX,r=this.affineY,i=this.curve.pLength;return t?(e=new Buffer(1+i),e.writeUInt8(r.isEven()?2:3,0)):(e=new Buffer(1+i+i),e.writeUInt8(4,0),r.toBuffer(i).copy(e,1+i)),n.toBuffer(i).copy(e,1),e},Point.decodeFrom=function(t,n){var r,i=n.readUInt8(0),o=4!==i,s=Math.floor((t.p.bitLength()+7)/8),u=BigInteger.fromBuffer(n.slice(1,1+s));if(o){e.equal(n.length,s+1,"Invalid sequence length"),e(2===i||3===i,"Invalid sequence tag");var f=3===i;r=t.pointFromX(f,u)}else{e.equal(n.length,1+s+s,"Invalid sequence length");var a=BigInteger.fromBuffer(n.slice(1+s));r=Point.fromAffine(t,u,a)}return r.compressed=o,r},Point.prototype.toString=function(){return this.curve.isInfinity(this)?"(INFINITY)":"("+this.affineX.toString()+","+this.affineY.toString()+")"},t.exports=Point}).call(e,n(0).Buffer)},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){function r(t){return t<s.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}function i(t,e,n){var i=r(e);return 1===i?t.writeUInt8(e,n):2===i?(t.writeUInt8(s.OP_PUSHDATA1,n),t.writeUInt8(e,n+1)):3===i?(t.writeUInt8(s.OP_PUSHDATA2,n),t.writeUInt16LE(e,n+1)):(t.writeUInt8(s.OP_PUSHDATA4,n),t.writeUInt32LE(e,n+1)),i}function o(t,e){var n,r,i=t.readUInt8(e);if(i<s.OP_PUSHDATA1)n=i,r=1;else if(i===s.OP_PUSHDATA1){if(e+2>t.length)return null;n=t.readUInt8(e+1),r=2}else if(i===s.OP_PUSHDATA2){if(e+3>t.length)return null;n=t.readUInt16LE(e+1),r=3}else{if(e+5>t.length)return null;if(i!==s.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=t.readUInt32LE(e+1),r=5}return{opcode:i,number:n,size:r}}var s=n(5);t.exports={encodingLength:r,encode:i,decode:o}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}t.exports=r;var i=n(29),o=n(13);o.inherits=n(4),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";(function(e){function r(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?k(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function i(t,e){B=B||n(8),t=t||{},this.objectMode=!!t.objectMode,e instanceof B&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(M||(M=n(31).StringDecoder),this.decoder=new M(t.encoding),this.encoding=t.encoding)}function o(t){if(B=B||n(8),!(this instanceof o))return new o(t);this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),R.call(this)}function s(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,h(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var f=new Error("stream.unshift() after end event");t.emit("error",f)}else{var a;!e.decoder||i||r||(n=e.decoder.write(n),a=!e.objectMode&&0===n.length),i||(e.reading=!1),a||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t))),d(t,e)}else i||(e.reading=!1);return u(e)}function u(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function f(t){return t>=j?t=j:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function a(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=f(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function c(t,e){var n=null;return Buffer.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}}function l(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(D("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?x(p,t):p(t))}function p(t){D("emit readable"),t.emit("readable"),b(t)}function d(t,e){e.readingMore||(e.readingMore=!0,x(v,t,e))}function v(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(D("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;D("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&U(t,"data")&&(e.flowing=!0,b(t))}}function y(t){D("readable nexttick read 0"),t.read(0)}function m(t,e){e.resumeScheduled||(e.resumeScheduled=!0,x(w,t,e))}function w(t,e){e.reading||(D("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;for(D("flow",e.flowing);e.flowing&&null!==t.read(););}function _(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=E(t,e.buffer,e.decoder),n}function E(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?S(t,e):T(t,e),r}function S(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}function T(t,e){var n=L.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}function P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,x(O,e,t))}function O(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function I(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function A(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}t.exports=o;var B,x=n(28),k=n(43);o.ReadableState=i;var R,U=(n(16).EventEmitter,function(t,e){return t.listeners(e).length});!function(){try{R=n(14)}catch(t){}finally{R||(R=n(16).EventEmitter)}}();var Buffer=n(0).Buffer,L=n(26),N=n(13);N.inherits=n(4);var H=n(119),D=void 0;D=H&&H.debuglog?H.debuglog("stream"):function(){};var M,C=n(99);N.inherits(o,R),o.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=L.from(t,e),e=""),s(this,n,t,e,!1)},o.prototype.unshift=function(t){return s(this,this._readableState,t,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return M||(M=n(31).StringDecoder),this._readableState.decoder=new M(t),this._readableState.encoding=t,this};var j=8388608;o.prototype.read=function(t){D("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return D("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):l(this),null;if(0===(t=a(t,e))&&e.ended)return 0===e.length&&P(this),null;var r=e.needReadable;D("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,D("length less than watermark",r)),e.ended||e.reading?(r=!1,D("reading or ended",r)):r&&(D("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=a(n,e)));var i;return i=t>0?_(t,e):null,null===i?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&P(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,n){function i(t){D("onunpipe"),t===l&&s()}function o(){D("onend"),t.end()}function s(){D("cleanup"),t.removeListener("close",a),t.removeListener("finish",c),t.removeListener("drain",y),t.removeListener("error",f),t.removeListener("unpipe",i),l.removeListener("end",o),l.removeListener("end",s),l.removeListener("data",u),m=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||y()}function u(e){D("ondata"),w=!1,!1!==t.write(e)||w||((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&A(p.pipes,t)!==-1)&&!m&&(D("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,w=!0),l.pause())}function f(e){D("onerror",e),h(),t.removeListener("error",f),0===U(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",c),h()}function c(){D("onfinish"),t.removeListener("close",a),h()}function h(){D("unpipe"),l.unpipe(t)}var l=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,D("pipe count=%d opts=%j",p.pipesCount,n);var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,v=d?o:s;p.endEmitted?x(v):l.once("end",v),t.on("unpipe",i);var y=g(l);t.on("drain",y);var m=!1,w=!1;return l.on("data",u),r(t,"error",f),t.once("close",a),t.once("finish",c),t.emit("pipe",l),p.flowing||(D("pipe resume"),l.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=A(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var n=R.prototype.on.call(this,t,e);if("data"===t)this._readableState.flowing!==!1&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&l(this,r):x(y,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(D("resume"),t.flowing=!0,m(this,t)),this},o.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(D("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(D("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){r.push(i)||(n=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return I(["error","close","destroy","pause","resume"],function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){D("wrapped _read",e),n&&(n=!1,t.resume())},r},o._fromList=_}).call(e,n(7))},function(t,e,n){(function(Buffer){function e(){this.init(),this._w=l,c.call(this,64,56)}function r(t,e,n){return n^t&(e^n)}function i(t,e,n){return t&e|n&(t|e)}function o(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function s(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function u(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function f(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}var a=n(4),c=n(11),h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=new Array(64);a(e,c),e.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},e.prototype._update=function(t){for(var e=this._w,n=0|this._a,a=0|this._b,c=0|this._c,l=0|this._d,p=0|this._e,d=0|this._f,v=0|this._g,g=0|this._h,y=0;y<16;++y)e[y]=t.readInt32BE(4*y);for(;y<64;++y)e[y]=f(e[y-2])+e[y-7]+u(e[y-15])+e[y-16]|0;for(var m=0;m<64;++m){var w=g+s(p)+r(p,d,v)+h[m]+e[m]|0,b=o(n)+i(n,a,c)|0;g=v,v=d,d=p,p=l+w|0,l=c,c=a,a=n,n=w+b|0}this._a=n+this._a|0,this._b=a+this._b|0,this._c=c+this._c|0,this._d=l+this._d|0,this._e=p+this._e|0,this._f=d+this._f|0,this._g=v+this._g|0,this._h=g+this._h|0},e.prototype._hash=function(){var t=new Buffer(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(){this.init(),this._w=v,p.call(this,128,112)}function r(t,e,n){return n^t&(e^n)}function i(t,e,n){return t&e|n&(t|e)}function o(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function s(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function u(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function f(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function a(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function c(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function h(t,e){return t>>>0<e>>>0?1:0}var l=n(4),p=n(11),d=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],v=new Array(160);l(e,p),e.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},e.prototype._update=function(t){for(var e=this._w,n=0|this._ah,l=0|this._bh,p=0|this._ch,v=0|this._dh,g=0|this._eh,y=0|this._fh,m=0|this._gh,w=0|this._hh,b=0|this._al,_=0|this._bl,E=0|this._cl,S=0|this._dl,T=0|this._el,P=0|this._fl,O=0|this._gl,I=0|this._hl,A=0;A<32;A+=2)e[A]=t.readInt32BE(4*A),e[A+1]=t.readInt32BE(4*A+4);for(;A<160;A+=2){var B=e[A-30],x=e[A-30+1],k=u(B,x),R=f(x,B);B=e[A-4],x=e[A-4+1];var U=a(B,x),L=c(x,B),N=e[A-14],H=e[A-14+1],D=e[A-32],M=e[A-32+1],C=R+H|0,j=k+N+h(C,R)|0;C=C+L|0,j=j+U+h(C,L)|0,C=C+M|0,j=j+D+h(C,M)|0,e[A]=j,e[A+1]=C}for(var K=0;K<160;K+=2){j=e[K],C=e[K+1];var F=i(n,l,p),z=i(b,_,E),q=o(n,b),G=o(b,n),W=s(g,T),V=s(T,g),Y=d[K],J=d[K+1],Z=r(g,y,m),Q=r(T,P,O),X=I+V|0,$=w+W+h(X,I)|0;X=X+Q|0,$=$+Z+h(X,Q)|0,X=X+J|0,$=$+Y+h(X,J)|0,X=X+C|0,$=$+j+h(X,C)|0;var tt=G+z|0,et=q+F+h(tt,G)|0;w=m,I=O,m=y,O=P,y=g,P=T,T=S+X|0,g=v+$+h(T,S)|0,v=p,S=E,p=l,E=_,l=n,_=b,b=X+tt|0,n=$+et+h(b,X)|0}this._al=this._al+b|0,this._bl=this._bl+_|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+T|0,this._fl=this._fl+P|0,this._gl=this._gl+O|0,this._hl=this._hl+I|0,this._ah=this._ah+n+h(this._al,b)|0,this._bh=this._bh+l+h(this._bl,_)|0,this._ch=this._ch+p+h(this._cl,E)|0,this._dh=this._dh+v+h(this._dl,S)|0,this._eh=this._eh+g+h(this._el,T)|0,this._fh=this._fh+y+h(this._fl,P)|0,this._gh=this._gh+m+h(this._gl,O)|0,this._hh=this._hh+w+h(this._hl,I)|0},e.prototype._hash=function(){function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}var e=new Buffer(64);return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){function r(t,e,n){this.__error=Error.call(this),this.__type=t,this.__value=e,this.__valueTypeName=n;var r;Object.defineProperty(this,"message",{enumerable:!0,get:function(){return r?r:(n=n||f(e),r=h(t,e,n))}})}function i(t,e,n,r,i,o){this.__error=i||Error.call(this),this.__label=n,this.__property=e,this.__type=t,this.__value=r,this.__valueTypeName=o;var s;Object.defineProperty(this,"message",{enumerable:!0,get:function(){return s?s:(t?(o=o||f(r),s=l(t,n,e,r,o)):s='Unexpected property "'+e+'"',s)}})}function o(t,e){return new r(t,{},e)}function s(t,e,n){return t instanceof i?(e=e+"."+t.__property,n=t.__label,new i(t.__type,e,n,t.__value,t.__error,t.__valueTypeName)):t instanceof r?new i(t.__type,e,n,t.__value,t.__error,t.__valueTypeName):t}function u(t){return t.name||t.toString().match(/function (.*?)\s*\(/)[1]}function f(t){return d.Null(t)?"":u(t.constructor)}function a(t){return d.Function(t)?"":d.String(t)?JSON.stringify(t):t&&d.Object(t)?"":t}function c(t){return d.Function(t)?t.toJSON?t.toJSON():u(t):d.Array(t)?"Array":t&&d.Object(t)?"Object":void 0!==t?t:""}function h(t,e,n){var r=a(e);return"Expected "+c(t)+", got"+(""!==n?" "+n:"")+(""!==r?" "+r:"")}function l(t,e,n,r,i){var o='" of type ';return"key"===e&&(o='" with key type '),h('property "'+c(n)+o+c(t),r,i)}var p=n(4),d=n(50);[r,i].forEach(function(t){p(t,Error),Object.defineProperty(t,"stack",{get:function(){return this.__error.stack}})}),t.exports={TfTypeError:r,TfPropertyTypeError:i,tfCustomError:o,tfSubError:s,tfJSON:c,getValueTypeName:f}},function(t,e){var n={Array:function(t){return null!==t&&void 0!==t&&t.constructor===Array},Boolean:function(t){return"boolean"==typeof t},Function:function(t){return"function"==typeof t},Null:function(t){return void 0===t||null===t},Number:function(t){return"number"==typeof t},Object:function(t){return"object"==typeof t},String:function(t){return"string"==typeof t},"":function(){return!0}};for(var r in n)n[r].toJSON=function(t){return t}.bind(null,r);t.exports=n},function(t,e,n){"use strict";function r(t){var e=t.lastBlock;return i(0).then(function(t){return o().then(function(n){var r=0!==e.height?i(e.height).then(function(n){return n.hash===e.hash?n:(console.warn("Blockhash mismatch",e,n),t)}):Promise.resolve(t);return Promise.all([r,n]).then(function(e){var n=s(e,2);return{first:n[0],last:n[1],nullBlock:t}})})})}function i(t){return(0,u.lookupBlockHash)(t).then(function(e){return{hash:e,height:t}})}function o(){return(0,u.lookupSyncStatus)().then(function(t){return i(t)})}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.loadBlockRange=r;var u=n(32)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=[];return a.Stream.fromArray(t).mapPromiseError(function(t){return e(t).then(function(e){e||n.push(t)})}).awaitFinish().then(function(){return n})}function o(t){var e=new Set;return t.forEach(function(t){e.add(t.hash)}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.GetChainTransactions=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.findDeleted=i;var f=n(19),a=n(33),c=n(24),h=20;e.GetChainTransactions=function(){function t(e,n,i,s,u,a,c){r(this,t),this.allCheckedAddresses=[],this.backSearch={},this.newTransactions={},this.lastSearched=-1,this.dfd=(0,f.deferred)(),this.originalLastConfirmed=i,this.lastConfirmed=i,this.chainId=e,this.range=n,this.getStream=s,this.txids=o(u),this.allAddresses=a,this.network=c}return u(t,[{key:"originalLastSearched",value:function(){return this.originalLastConfirmed+h}},{key:"nullRange",value:function(){var t=this.range;return s({},t,{since:t.nullBlock})}}]),u(t,[{key:"discover",value:function(){var t=h-1;return this.iterate(0,t,this.range),this.dfd.promise}},{key:"iterate",value:function(t,e,n){var r=this,i=null;this.allAddresses.length-1>=e&&(i=this.allAddresses.slice(t,e+1));var o=this.getStream(this.chainId,t,e,n.first.height,n.last.height,this.txids.size,i);o.values.attach(function(e){if(e instanceof Error)return r.dfd.reject(e),void o.dispose();var n=e;r.handleTransactions(n,t)}),o.finish.attach(function(){r.handleFinish(e)})}},{key:"handleTransactions",value:function(t,e){var n=this;t.addresses.forEach(function(t,r){n.allAddresses[r+e]=t,n.allCheckedAddresses[r+e]=t,n.backSearch[t]=r+e}),t.transactions.forEach(function(t){var e=c.Transaction.fromHex(t.hex,t.zcash),r=[];e.outs.forEach(function(e){var i=void 0;try{if(i=c.address.fromOutputScript(e.script,n.network),null!=n.backSearch[i]&&null!=t.height){var o=n.backSearch[i];o>n.lastConfirmed&&(n.lastConfirmed=o)}}catch(t){i="UNKNOWN"}r.push(i)});var i={tx:e,outputAddresses:r,height:t.height,timestamp:t.timestamp,hash:t.hash,fee:t.fee,vsize:t.vsize};n.newTransactions[i.hash]=i,n.txids.add(i.hash)})}},{key:"handleFinish",value:function(t){this.lastSearched=t;var e=this.lastConfirmed+h,n=this.lastSearched+h,r=e<n?e:n,i=this.lastSearched+1;r>=i?r>this.originalLastSearched()?i>=this.originalLastSearched()+1?this.iterate(i,r,this.nullRange()):this.iterate(i,this.originalLastSearched(),this.range):this.iterate(i,r,this.range):this.dfd.resolve({newTransactions:this.newTransactions,allAddresses:this.allAddresses})}}]),t}()},function(t,e,n){"use strict";function r(t,e){var n=new Set(e),r=t.utxos.filter(function(t){return!n.has(t.transactionHash)}),i=t.transactions.filter(function(t){return!n.has(t.hash)});return a({},t,{utxos:r,transactions:i})}function i(t,e,n,i){var a=0!==i.length?r(e,i):e,l=o(t.main.allAddresses,t.change.allAddresses),p=s(t.main.newTransactions,t.change.newTransactions),d=(0,c.deriveUtxos)(t,a,l,p),v=(0,h.deriveAnalysis)(p,a.transactions,l),g=f(v,l,t.main.allAddresses,0),y=g.usedAddresses,m=g.unusedAddresses,w=g.lastConfirmed,b=f(v,l,t.change.allAddresses,1),_=v.length>0?v[0].balance:0;if(_!==d.reduce(function(t,e){return e.value+t},0))throw new Error("Inconsistent info.");var E=u(v),S=t.change.allAddresses,T=b.usedAddresses.length,P=b.unusedAddresses.length>0;return{utxos:d,transactions:v,usedAddresses:y,unusedAddresses:m,lastConfirmedMain:w,lastConfirmedChange:b.lastConfirmed,changeIndex:T,balance:_,lastBlock:n,sentAddresses:E,changeAddresses:S,allowChange:P,version:1}}function o(t,e){var n={};return t.forEach(function(t,e){n[t]=[0,e]}),e.forEach(function(t,e){n[t]=[1,e]}),n}function s(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function u(t){var e={};return t.forEach(function(t){"sent"===t.type&&t.targets.forEach(function(n){var r=n.address,i=n.i,o=t.hash;e[o+":"+i]=r})}),e}function f(t,e,n,r){var i=[],o=-1,s=-1;t.forEach(function(t){(0,l.objectValues)(t.myOutputs).forEach(function(n){var u=n.address,f=n.value,a=e[u];if(a[0]===r){var c=a[1];null==i[c]?i[c]=f:i[c]+=f,o<c&&(o=c),t.height&&s<c&&(s=c)}})});for(var u=[],f=0;f<=o;f++){var a=n[f],c=null==i[f]?0:i[f];u.push({address:a,received:c})}for(var h=[],d=o+1;d<=s+p;d++)h.push(n[d]);return{usedAddresses:u,unusedAddresses:h,lastConfirmed:s}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.integrateNewTxs=i;var c=n(56),h=n(55),l=n(18),p=20},function(t,e,n){"use strict";function r(t){if(null==t)return{dateInfo:null,dateInfoDayFormat:null,dateInfoTimeFormat:null};var e=t,n=new Date(1e3*e);return{dateInfo:n.toString(),dateInfoDayFormat:o(n),dateInfoTimeFormat:i(n)}}function i(t){return s(t.getHours().toString())+":"+s(t.getMinutes().toString())+":"+s(t.getSeconds().toString())}function o(t){return t.getFullYear().toString()+"-"+s((t.getMonth()+1).toString())+"-"+s(t.getDate().toString())}function s(t){return 1===t.length?"0"+t:t}Object.defineProperty(e,"__esModule",{value:!0}),e.deriveDateFormats=r},function(t,e,n){"use strict";function r(t,e,n){return f(o(t,e,i(t,e),n))}function i(t,e){function n(t){var e=[];return Object.keys(t.myOutputs).forEach(function(n){e[parseInt(n)]=t.myOutputs[parseInt(n)]}),{txid:t.hash,outputs:e}}function r(t){for(var e=[],n=0;n<t.tx.outs.length;n++){var r=t.tx.outs[n],i=t.outputAddresses[n];e.push({address:i,value:r.value})}return{txid:t.hash,outputs:e}}var i={},o=(0,h.objectValues)(t).map(function(t){return r(t)});return e.map(function(t){return n(t)}).concat(o).forEach(function(t){var e=t.txid,n=t.outputs;i[e]=n}),i}function o(t,e,n,r){var i={};return e.forEach(function(t){i[t.hash]=t}),Object.keys(t).forEach(function(e){i[e]=s(t[e],n,r)}),i}function s(t,e,n){var r=t.tx.ins.map(function(t){return{id:(0,h.getInputId)(t),index:t.index}}),i=null==t.tx.joinsplits||t.tx.joinsplits.length>0,o=t.tx.ins.some(function(t){return p.Transaction.isCoinbaseHash(t.hash)}),s=t.hash,f=u(r,e,n,s,i),a=(0,l.deriveDateFormats)(t.timestamp);return c({isCoinbase:o},a,{height:t.height,hash:s},f,{inputs:r,tsize:t.tx.byteLength(),vsize:t.vsize,fee:t.fee})}function u(t,e,n,r,i){function o(t){return null!=t&&null!=n[t]&&0===n[t][0]}function s(t){return null!=t&&null!=n[t]&&1===n[t][0]}function u(t){return null!=t&&null!=n[t]}function f(t){return!u(t)}function a(t){var e=[];return c.forEach(function(n,r){if(null!=n){var i=n.address,o=n.value;t(i)&&e.push({address:i,value:o,i:r})}}),e}var c=e[r],h=0,l=0,p=0;t.forEach(function(t){var n=t.id,r=t.index,i=e[n];if(i){var o=i[r];o&&u(o.address)&&(p-=o.value,l++)}});var d={};c.forEach(function(t,e){null!=t&&u(t.address)&&(p+=t.value,h++,d[e]={address:t.address,value:t.value,i:e})});var v=[],g=void 0,y=t.length,m=c.length;return l!==y||i||h!==m?p>0?(g="recv",v=a(function(t){return o(t)}),0===v.length&&(v=a(function(t){return s(t)}))):(g="sent",v=a(function(t){return f(t)}),0===v.length&&(g="self",v=[])):(g="self",v=[]),{targets:v,type:g,value:p,myOutputs:d}}function f(t){var e=(0,h.objectValues)(t).sort(a),n=null;return e.map(function(t){var e=null!=n?n.balance+t.value:t.value;return n=c({},t,{balance:e})}).reverse()}function a(t,e){return(null!=t.height?t.height:1/0)-(null!=e.height?e.height:1/0)||0||d.indexOf(t.type)-d.indexOf(e.type)}Object.defineProperty(e,"__esModule",{value:!0});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.deriveAnalysis=r;var h=n(18),l=n(54),p=n(24),d=["recv","self","sent"]},function(t,e,n){"use strict";function r(t,e,n,r){var u=i(t.main.newTransactions,t.change.newTransactions,e.transactions),f=o(u,t.main.newTransactions,t.change.newTransactions,e.transactions);return s(e.utxos,r,n,f)}function i(t,e,n){var r=new Set;return Object.keys(t).forEach(function(t){r.add(t)}),Object.keys(e).forEach(function(t){r.add(t)}),n.forEach(function(t){r.add(t.hash)}),r}function o(t,e,n,r){function i(e){return t.has(e)}function o(t){(0,u.objectValues)(t).forEach(function(t){t.tx.ins.forEach(function(t){var e=t.index,n=(0,u.getInputId)(t);i(n)&&s.add(n+":"+e)})})}var s=new Set;return r.forEach(function(t){t.inputs.forEach(function(t){var e=t.id,n=t.index;i(e)&&s.add(e+":"+n)})}),o(e),o(n),s}function s(t,e,n,r){var i={},o=function(t){return t&&null!=n[t]},s=function(t){return t.ins.some(function(t){return f.Transaction.isCoinbaseHash(t.hash)})};return t.filter(function(t){var e=t.transactionHash+":"+t.index;return!r.has(e)}).forEach(function(t){var e=t.transactionHash+":"+t.index;i[e]=t}),(0,u.objectValues)(e).forEach(function(t){var e=t.hash,u=t.tx,f=t.height,a=t.outputAddresses,c=t.vsize,h=t.fee,l=s(u);u.outs.forEach(function(t,s){var p=e+":"+s,d=a[s];if(!r.has(p)&&o(d)){var v=n[d],g={index:s,value:t.value,transactionHash:e,height:f,coinbase:l,addressPath:v,vsize:c,tsize:u.byteLength(),fee:h};i[p]=g}})}),(0,u.objectValues)(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.deriveUtxos=r;var u=n(18),f=n(24)},function(t,e){t.exports=function(t){function e(e){if(0===e.length)return"";for(var n=[0],r=0;r<e.length;++r){for(var i=0,s=e[r];i<n.length;++i)s+=n[i]<<8,n[i]=s%o,s=s/o|0;for(;s>0;)n.push(s%o),s=s/o|0}for(var u="",f=0;0===e[f]&&f<e.length-1;++f)u+=t[0];for(var a=n.length-1;a>=0;--a)u+=t[n[a]];return u}function n(t){if(0===t.length)return[];for(var e=[0],n=0;n<t.length;n++){var r=i[t[n]];if(void 0===r)return;for(var u=0,f=r;u<e.length;++u)f+=e[u]*o,e[u]=255&f,f>>=8;for(;f>0;)e.push(255&f),f>>=8}for(var a=0;t[a]===s&&a<t.length-1;++a)e.push(0);return e.reverse()}function r(t){var e=n(t);if(e)return e;throw new Error("Non-base"+o+" character")}for(var i={},o=t.length,s=t.charAt(0),u=0;u<t.length;u++)i[t.charAt(u)]=u;return{encode:e,decodeUnsafe:n,decode:r}}},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-r(t)}function o(t){var e,n,i,o,s,u,f=t.length;s=r(t),u=new h(3*f/4-s),i=s>0?f-4:f;var a=0;for(e=0,n=0;e<i;e+=4,n+=3)o=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],u[a++]=o>>16&255,u[a++]=o>>8&255,u[a++]=255&o;return 2===s?(o=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,u[a++]=255&o):1===s&&(o=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,u[a++]=o>>8&255,u[a++]=255&o),u}function s(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function u(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(s(r));return i.join("")}function f(t){for(var e,n=t.length,r=n%3,i="",o=[],s=16383,f=0,c=n-r;f<c;f+=s)o.push(u(t,f,f+s>c?c:f+s));return 1===r?(e=t[n-1],i+=a[e>>2],i+=a[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=a[e>>10],i+=a[e>>4&63],i+=a[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=i,e.toByteArray=o,e.fromByteArray=f;for(var a=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=l.length;p<d;++p)a[p]=l[p],c[l.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e,n){(function(Buffer){var t=n(17),BigInteger=n(34);BigInteger.fromByteArrayUnsigned=function(t){return new BigInteger(128&t[0]?[0].concat(t):t)},BigInteger.prototype.toByteArrayUnsigned=function(){var t=this.toByteArray();return 0===t[0]?t.slice(1):t},BigInteger.fromDERInteger=function(t){return new BigInteger(t)},BigInteger.prototype.toDERInteger=BigInteger.prototype.toByteArray,BigInteger.fromBuffer=function(t){if(128&t[0]){var e=Array.prototype.slice.call(t);return new BigInteger([0].concat(e))}return new BigInteger(t)},BigInteger.fromHex=function(e){return""===e?BigInteger.ZERO:(t.equal(e,e.match(/^[A-Fa-f0-9]+/),"Invalid hex string"),t.equal(e.length%2,0,"Incomplete hex"),new BigInteger(e,16))},BigInteger.prototype.toBuffer=function(t){for(var e=this.toByteArrayUnsigned(),n=[],r=t-e.length;n.length<r;)n.push(0);return new Buffer(n.concat(e))},BigInteger.prototype.toHex=function(t){return this.toBuffer(t).toString("hex")}}).call(e,n(0).Buffer)},function(t,e,n){var r=n(5),i={};for(var o in r){i[r[o]]=o}t.exports=i},function(t,e,n){(function(Buffer){t.exports=function(t){function e(e){if(0===e.length)return"";for(var n=[0],r=0;r<e.length;++r){for(var i=0,s=e[r];i<n.length;++i)s+=n[i]<<8,n[i]=s%o,s=s/o|0;for(;s>0;)n.push(s%o),s=s/o|0}for(var u="",f=0;0===e[f]&&f<e.length-1;++f)u+=t[0];for(var a=n.length-1;a>=0;--a)u+=t[n[a]];return u}function n(t){if(0===t.length)return new Buffer(0);for(var e=[0],n=0;n<t.length;n++){var r=i[t[n]];if(void 0===r)return;for(var u=0,f=r;u<e.length;++u)f+=e[u]*o,e[u]=255&f,f>>=8;for(;f>0;)e.push(255&f),f>>=8}for(var a=0;t[a]===s&&a<t.length-1;++a)e.push(0);return new Buffer(e.reverse())}function r(t){var e=n(t);if(e)return e;throw new Error("Non-base"+o+" character")}for(var i={},o=t.length,s=t.charAt(0),u=0;u<t.length;u++){var f=t.charAt(u);if(void 0!==i[f])throw new TypeError(f+" is ambiguous");i[f]=u}return{encode:e,decodeUnsafe:n,decode:r}}}).call(e,n(0).Buffer)},function(t,e,n){var r=n(61);t.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(t,e,n){(function(Buffer){function e(){this.version=1,this.prevHash=null,this.merkleRoot=null,this.timestamp=0,this.bits=0,this.nonce=0}var r=n(21),i=n(10),o=n(96),s=n(1),u=n(2),f=n(25);e.fromBuffer=function(t){function n(e){return a+=e,t.slice(a-e,a)}function i(){var e=t.readUInt32LE(a);return a+=4,e}function o(){var e=t.readInt32LE(a);return a+=4,e}function s(){var e=r.readVarInt(t,a);return a+=e.size,e.number}function u(){var e=f.fromBuffer(t.slice(a),!1,!0);return a+=e.byteLength(),e}if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");var a=0,c=new e;if(c.version=o(),c.prevHash=n(32),c.merkleRoot=n(32),c.timestamp=i(),c.bits=i(),c.nonce=i(),80===t.length)return c;var h=s();c.transactions=[];for(var l=0;l<h;++l){var p=u();c.transactions.push(p)}return c},e.fromHex=function(t){return e.fromBuffer(new Buffer(t,"hex"))},e.prototype.getHash=function(){return i.hash256(this.toBuffer(!0))},e.prototype.getId=function(){return this.getHash().reverse().toString("hex")},e.prototype.getUTCDate=function(){var t=new Date(0);return t.setUTCSeconds(this.timestamp),t},e.prototype.toBuffer=function(t){function e(t){t.copy(o,s),s+=t.length}function n(t){o.writeInt32LE(t,s),s+=4}function i(t){o.writeUInt32LE(t,s),s+=4}var o=new Buffer(80),s=0;if(n(this.version),e(this.prevHash),e(this.merkleRoot),i(this.timestamp),i(this.bits),i(this.nonce),t||!this.transactions)return o;var u=r.varIntBuffer(this.transactions.length),f=this.transactions.map(function(t){return t.toBuffer()});return Buffer.concat([o,u].concat(f))},e.prototype.toHex=function(t){return this.toBuffer(t).toString("hex")},e.calculateTarget=function(t){var e=((4278190080&t)>>24)-3,n=8388607&t,r=new Buffer(32);return r.fill(0),r.writeUInt32BE(n,28-e),r},e.calculateMerkleRoot=function(t){if(s([{getHash:u.Function}],t),0===t.length)throw TypeError("Cannot compute merkle root for zero transactions");var e=t.map(function(t){return t.getHash()});return o(e,i.hash256)},e.prototype.checkMerkleRoot=function(){if(!this.transactions)return!1;var t=e.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(t)},e.prototype.checkProofOfWork=function(){var t=this.getHash().reverse(),n=e.calculateTarget(this.bits);return t.compare(n)<=0},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(t,e,n){s(u.tuple(u.Hash256bit,u.Buffer256bit,u.Function),arguments);var r=new Buffer(32),i=new Buffer(32);i.fill(1),r.fill(0),r=o("sha256",r).update(i).update(a).update(e).update(t).digest(),i=o("sha256",r).update(i).digest(),r=o("sha256",r).update(i).update(c).update(e).update(t).digest(),i=o("sha256",r).update(i).digest(),i=o("sha256",r).update(i).digest();for(var f=BigInteger.fromBuffer(i);f.signum()<=0||f.compareTo(l.n)>=0||!n(f);)r=o("sha256",r).update(i).update(a).digest(),i=o("sha256",r).update(i).digest(),i=o("sha256",r).update(i).digest(),f=BigInteger.fromBuffer(i);return f}function r(t,n){s(u.tuple(u.Hash256bit,u.BigInt),arguments);var r,i,o=n.toBuffer(32),a=BigInteger.fromBuffer(t),c=l.n,h=l.G;return e(t,o,function(t){var e=h.multiply(t);return!l.isInfinity(e)&&(r=e.affineX.mod(c),0!==r.signum()&&(i=t.modInverse(c).multiply(a.add(n.multiply(r))).mod(c),0!==i.signum()))}),i.compareTo(p)>0&&(i=c.subtract(i)),new f(r,i)}function i(t,e,n){s(u.tuple(u.Hash256bit,u.ECSignature,u.ECPoint),arguments);var r=l.n,i=l.G,o=e.r,f=e.s;if(o.signum()<=0||o.compareTo(r)>=0)return!1;if(f.signum()<=0||f.compareTo(r)>=0)return!1;var a=BigInteger.fromBuffer(t),c=f.modInverse(r),h=a.multiply(c).mod(r),p=o.multiply(c).mod(r),d=i.multiplyTwo(h,n,p);return!l.isInfinity(d)&&d.affineX.mod(r).equals(o)}var o=n(40),s=n(1),u=n(2),BigInteger=n(6),f=n(23),a=new Buffer([0]),c=new Buffer([1]),h=n(27),l=h.getCurveByName("secp256k1"),p=l.n.shiftRight(1);t.exports={deterministicGenerateK:e,sign:r,verify:i,__curve:l}}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(t,e){if(s(u.tuple("ECPair",u.Buffer256bit),arguments),!t.compressed)throw new TypeError("BIP32 only allows compressed keyPairs");this.keyPair=t,this.chainCode=e,this.depth=0,this.index=0,this.parentFingerprint=0}var r=n(36),i=n(10),o=n(40),s=n(1),u=n(2),f=n(12),BigInteger=n(6),ECPair=n(22),a=n(27),c=a.getCurveByName("secp256k1");e.HIGHEST_BIT=2147483648,e.LENGTH=78,e.MASTER_SECRET=new Buffer("Bitcoin seed"),e.fromSeedBuffer=function(t,n){if(s(u.tuple(u.Buffer,u.maybe(u.Network)),arguments),t.length<16)throw new TypeError("Seed should be at least 128 bits");if(t.length>64)throw new TypeError("Seed should be at most 512 bits");var r=o("sha512",e.MASTER_SECRET).update(t).digest(),i=r.slice(0,32),f=r.slice(32),a=BigInteger.fromBuffer(i);return new e(new ECPair(a,null,{network:n}),f)},e.fromSeedHex=function(t,n){return e.fromSeedBuffer(new Buffer(t,"hex"),n)},e.fromBase58=function(t,n,i){var o=r.decode(t);if(78!==o.length)throw new Error("Invalid buffer length");var s,u=o.readUInt32BE(0);if(Array.isArray(n)){if(!(s=n.filter(function(t){return u===t.bip32.private||u===t.bip32.public}).pop()))throw new Error("Unknown network version")}else s=n||f.bitcoin;if(u!==s.bip32.private&&u!==s.bip32.public)throw new Error("Invalid network version");var h=o[4],l=o.readUInt32BE(5);if(0===h&&0!==l)throw new Error("Invalid parent fingerprint");var p=o.readUInt32BE(9);if(0===h&&0!==p)throw new Error("Invalid index");var d,v=o.slice(13,45);if(u===s.bip32.private){if(0!==o.readUInt8(45))throw new Error("Invalid private key");var g=BigInteger.fromBuffer(o.slice(46,78));d=new ECPair(g,null,{network:s})}else{var y=a.Point.decodeFrom(c,o.slice(45,78));i||c.validate(y),d=new ECPair(null,y,{network:s})}var m=new e(d,v);return m.depth=h,m.index=p,m.parentFingerprint=l,m},e.prototype.getAddress=function(){return this.keyPair.getAddress()},e.prototype.getIdentifier=function(){return i.hash160(this.keyPair.getPublicKeyBuffer())},e.prototype.getFingerprint=function(){return this.getIdentifier().slice(0,4)},e.prototype.getNetwork=function(){return this.keyPair.getNetwork()},e.prototype.getPublicKeyBuffer=function(){return this.keyPair.getPublicKeyBuffer()},e.prototype.neutered=function(){var t=new ECPair(null,this.keyPair.Q,{network:this.keyPair.network}),n=new e(t,this.chainCode);return n.depth=this.depth,n.index=this.index,n.parentFingerprint=this.parentFingerprint,n},e.prototype.sign=function(t){return this.keyPair.sign(t)},e.prototype.verify=function(t,e){return this.keyPair.verify(t,e)},e.prototype.toBase58=function(t){if(void 0!==t)throw new TypeError("Unsupported argument in 2.0.0");var e=this.keyPair.network,n=this.isNeutered()?e.bip32.public:e.bip32.private,i=new Buffer(78);return i.writeUInt32BE(n,0),i.writeUInt8(this.depth,4),i.writeUInt32BE(this.parentFingerprint,5),i.writeUInt32BE(this.index,9),this.chainCode.copy(i,13),this.isNeutered()?this.keyPair.getPublicKeyBuffer().copy(i,45):(i.writeUInt8(0,45),this.keyPair.d.toBuffer(32).copy(i,46)),r.encode(i)},e.prototype.derive=function(t){s(u.UInt32,t);var n=t>=e.HIGHEST_BIT,r=new Buffer(37);if(n){if(this.isNeutered())throw new TypeError("Could not derive hardened child key");r[0]=0,this.keyPair.d.toBuffer(32).copy(r,1),r.writeUInt32BE(t,33)}else this.keyPair.getPublicKeyBuffer().copy(r,0),r.writeUInt32BE(t,33);var i=o("sha512",this.chainCode).update(r).digest(),f=i.slice(0,32),a=i.slice(32),h=BigInteger.fromBuffer(f);if(h.compareTo(c.n)>=0)return this.derive(t+1);var l;if(this.isNeutered()){var p=c.G.multiply(h).add(this.keyPair.Q);if(c.isInfinity(p))return this.derive(t+1);l=new ECPair(null,p,{network:this.keyPair.network})}else{var d=h.add(this.keyPair.d).mod(c.n);if(0===d.signum())return this.derive(t+1);l=new ECPair(d,null,{network:this.keyPair.network})}var v=new e(l,a);return v.depth=this.depth+1,v.index=t,v.parentFingerprint=this.getFingerprint().readUInt32BE(0),v},e.prototype.deriveHardened=function(t){return s(u.UInt31,t),this.derive(t+e.HIGHEST_BIT)},e.prototype.isNeutered=function(){return!this.keyPair.d},e.prototype.derivePath=function(t){s(u.BIP32Path,t);var e=t.split("/");if("m"===e[0]){if(this.parentFingerprint)throw new Error("Not a master node");e=e.slice(1)}return e.reduce(function(t,e){var n;return"'"===e.slice(-1)?(n=parseInt(e.slice(0,-1),10),t.deriveHardened(n)):(n=parseInt(e,10),t.derive(n))},this)},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){function r(t){if(l.output.check(t))return v.P2WPKH;if(p.output.check(t))return v.P2WSH;if(c.output.check(t))return v.P2PKH;if(h.output.check(t))return v.P2SH;var e=s(t);return u.output.check(e)?v.MULTISIG:a.output.check(e)?v.P2PK:d.output.check(e)?v.WITNESS_COMMITMENT:f.output.check(e)?v.NULLDATA:v.NONSTANDARD}function i(t,e){var n=s(t);return c.input.check(n)?v.P2PKH:h.input.check(n,e)?v.P2SH:u.input.check(n,e)?v.MULTISIG:a.input.check(n)?v.P2PK:v.NONSTANDARD}function o(t,e){var n=s(t);return l.input.check(n)?v.P2WPKH:p.input.check(n)?v.P2WSH:v.NONSTANDARD}var s=n(3).decompile,u=n(67),f=n(70),a=n(71),c=n(74),h=n(76),l=n(80),p=n(83),d=n(78),v={MULTISIG:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.exports={classifyInput:i,classifyOutput:r,classifyWitness:o,multisig:u,nullData:f,pubKey:a,pubKeyHash:c,scriptHash:h,witnessPubKeyHash:l,witnessScriptHash:p,witnessCommitment:d,types:v}},function(t,e,n){t.exports={input:n(68),output:n(69)}},function(t,e,n){(function(Buffer){function e(t){return t===c.OP_0||f.isCanonicalSignature(t)}function r(t,n){var r=f.decompile(t);return!(r.length<2)&&(r[0]===c.OP_0&&(n?r.slice(1).every(e):r.slice(1).every(f.isCanonicalSignature)))}function i(t,n){if(a([e],t),n){var r=f.multisig.output.decode(n);if(t.length<r.m)throw new TypeError("Not enough signatures provided");if(t.length>r.pubKeys.length)throw new TypeError("Too many signatures provided")}return[].concat(new Buffer(0),t)}function o(t,e){return f.compile(i(t,e))}function s(t,e){return a(r,t,e),t.slice(1)}function u(t,e){return s(f.decompile(t),e)}var f=n(3),a=n(1),c=n(5);r.toJSON=function(){return"multisig input"},t.exports={check:r,decode:u,decodeStack:s,encode:o,encodeStack:i}}).call(e,n(0).Buffer)},function(t,e,n){function r(t,e){var n=s.decompile(t);if(n.length<4)return!1;if(n[n.length-1]!==a.OP_CHECKMULTISIG)return!1;if(!u.Number(n[0]))return!1;if(!u.Number(n[n.length-2]))return!1;var r=n[0]-c,i=n[n.length-2]-c;return!(r<=0)&&(!(i>16)&&(!(r>i)&&(i===n.length-3&&(!!e||n.slice(1,-2).every(s.isCanonicalPubKey)))))}function i(t,e){f({m:u.Number,pubKeys:[s.isCanonicalPubKey]},{m:t,pubKeys:e});var n=e.length;if(n<t)throw new TypeError("Not enough pubKeys provided");return s.compile([].concat(c+t,e,c+n,a.OP_CHECKMULTISIG))}function o(t,e){var n=s.decompile(t);return f(r,n,e),{m:n[0]-c,pubKeys:n.slice(1,-2)}}var s=n(3),u=n(2),f=n(1),a=n(5),c=a.OP_RESERVED;r.toJSON=function(){return"multi-sig output"},t.exports={check:r,decode:o,encode:i}},function(t,e,n){function r(t){var e=s.compile(t);return e.length>1&&e[0]===a.OP_RETURN}function i(t){return f(u.Buffer,t),s.compile([a.OP_RETURN,t])}function o(t){return f(r,t),t.slice(2)}var s=n(3),u=n(2),f=n(1),a=n(5);r.toJSON=function(){return"null data output"},t.exports={output:{check:r,decode:o,encode:i}}},function(t,e,n){t.exports={input:n(72),output:n(73)}},function(t,e,n){function r(t){var e=f.decompile(t);return 1===e.length&&f.isCanonicalSignature(e[0])}function i(t){return c(a.Buffer,t),[t]}function o(t){return f.compile(i(t))}function s(t){return c(r,t),t[0]}function u(t){return s(f.decompile(t))}var f=n(3),a=n(2),c=n(1);r.toJSON=function(){return"pubKey input"},t.exports={check:r,decode:u,decodeStack:s,encode:o,encodeStack:i}},function(t,e,n){function r(t){var e=s.decompile(t);return 2===e.length&&s.isCanonicalPubKey(e[0])&&e[1]===f.OP_CHECKSIG}function i(t){return u(s.isCanonicalPubKey,t),s.compile([t,f.OP_CHECKSIG])}function o(t){var e=s.decompile(t);return u(r,e),e[0]}var s=n(3),u=n(1),f=n(5);r.toJSON=function(){return"pubKey output"},t.exports={check:r,decode:o,encode:i}},function(t,e,n){t.exports={input:n(38),output:n(75)}},function(t,e,n){function r(t){var e=s.compile(t);return 25===e.length&&e[0]===a.OP_DUP&&e[1]===a.OP_HASH160&&20===e[2]&&e[23]===a.OP_EQUALVERIFY&&e[24]===a.OP_CHECKSIG}function i(t){return f(u.Hash160bit,t),s.compile([a.OP_DUP,a.OP_HASH160,t,a.OP_EQUALVERIFY,a.OP_CHECKSIG])}function o(t){return f(r,t),t.slice(3,23)}var s=n(3),u=n(2),f=n(1),a=n(5);r.toJSON=function(){return"pubKeyHash output"},t.exports={check:r,decode:o,encode:i}},function(t,e,n){t.exports={input:n(39),output:n(77)}},function(t,e,n){function r(t){var e=s.compile(t);return 23===e.length&&e[0]===a.OP_HASH160&&20===e[1]&&e[22]===a.OP_EQUAL}function i(t){return f(u.Hash160bit,t),s.compile([a.OP_HASH160,t,a.OP_EQUAL])}function o(t){return f(r,t),t.slice(2,22)}var s=n(3),u=n(2),f=n(1),a=n(5);r.toJSON=function(){return"scriptHash output"},t.exports={check:r,decode:o,encode:i}},function(t,e,n){t.exports={output:n(79)}},function(t,e,n){(function(Buffer){function e(t){var e=o.compile(t);return e.length>37&&e[0]===f.OP_RETURN&&36===e[1]&&e.slice(2,6).equals(a)}function r(t){return u(s.Hash256bit,t),o.compile([f.OP_RETURN,Buffer.concat([a,t])])}function i(t){return u(e,t),o.decompile(t)[1].slice(4,36)}var o=n(3),s=n(2),u=n(1),f=n(5),a=new Buffer("aa21a9ed","hex");e.toJSON=function(){return"Witness commitment output"},t.exports={check:e,decode:i,encode:r}}).call(e,n(0).Buffer)},function(t,e,n){t.exports={input:n(81),output:n(82)}},function(t,e,n){var r=n(38);t.exports={check:r.check,decodeStack:r.decodeStack,encodeStack:r.encodeStack}},function(t,e,n){function r(t){var e=s.compile(t);return 22===e.length&&e[0]===a.OP_0&&20===e[1]}function i(t){return f(u.Hash160bit,t),s.compile([a.OP_0,t])}function o(t){return f(r,t),t.slice(2)}var s=n(3),u=n(2),f=n(1),a=n(5);r.toJSON=function(){return"Witness pubKeyHash output"},t.exports={check:r,decode:o,encode:i}},function(t,e,n){t.exports={input:n(84),output:n(85)}},function(t,e,n){var r=n(39);t.exports={check:r.check,decodeStack:r.decodeStack,encodeStack:r.encodeStack}},function(t,e,n){function r(t){var e=s.compile(t);return 34===e.length&&e[0]===a.OP_0&&32===e[1]}function i(t){return f(u.Hash256bit,t),s.compile([a.OP_0,t])}function o(t){return f(r,t),t.slice(2)}var s=n(3),u=n(2),f=n(1),a=n(5);r.toJSON=function(){return"Witness scriptHash output"},t.exports={check:r,decode:o,encode:i}},function(t,e,n){(function(Buffer){function e(t,e,n){var r=[],i=[];switch(t){case _.P2PKH:r=e.slice(1),i=e.slice(0,1);break;case _.P2PK:r[0]=n?g.pubKey.output.decode(n):void 0,i=e.slice(0,1);break;case _.MULTISIG:if(n){r=g.multisig.output.decode(n).pubKeys}i=e.slice(1).map(function(t){return 0===t.length?void 0:t})}return{pubKeys:r,signatures:i}}function r(t,n){var r,i,o,s,u,f,a,c,h,l,p=!1,d=!1,y=!1,m=g.decompile(t);g.classifyInput(m,!0)===_.P2SH&&(y=!0,u=m[m.length-1],c=g.classifyOutput(u),r=g.scriptHash.output.encode(v.hash160(u)),i=_.P2SH,s=u);var w=g.classifyWitness(n);if(w===_.P2WSH){if(f=n[n.length-1],a=g.classifyOutput(f),d=!0,0===t.length){if(r=g.witnessScriptHash.output.encode(v.sha256(f)),i=_.P2WSH,void 0!==u)throw new Error("Redeem script given when unnecessary")}else{if(!u)throw new Error("No redeemScript provided for P2WSH, but scriptSig non-empty");if(h=g.witnessScriptHash.output.encode(v.sha256(f)),!u.equals(h))throw new Error("Redeem script didn't match witnessScript")}if(E.indexOf(g.classifyOutput(f))===-1)throw new Error("unsupported witness script");s=f,o=a,l=n.slice(0,-1)}else if(w===_.P2WPKH){var b=n[n.length-1],T=v.hash160(b);if(0===t.length){if(r=g.witnessPubKeyHash.output.encode(T),i=_.P2WPKH,void 0!==u)throw new Error("Redeem script given when unnecessary")}else{if(!u)throw new Error("No redeemScript provided for P2WPKH, but scriptSig wasn't empty");if(h=g.witnessPubKeyHash.output.encode(T),!u.equals(h))throw new Error("Redeem script did not have the right witness program")}o=_.P2PKH,l=n}else if(u){if(S.indexOf(c)===-1)throw new Error("Bad redeemscript!");s=u,o=c,l=m.slice(0,-1)}else i=o=g.classifyInput(t),l=m;var P=e(o,l,s),O={pubKeys:P.pubKeys,signatures:P.signatures,prevOutScript:r,prevOutType:i,signType:o,signScript:s,witness:Boolean(p)};return y&&(O.redeemScript=u,O.redeemScriptType=c),d&&(O.witnessScript=f,O.witnessScriptType=a),O}function i(t,e,n){if(t.redeemScriptType===_.MULTISIG&&t.redeemScript&&t.pubKeys.length!==t.signatures.length){var r=t.signatures.concat();t.signatures=t.pubKeys.map(function(i,o){var s,u=ECPair.fromPublicKeyBuffer(i);return r.some(function(i,o){if(!i)return!1;var f=T.parseScriptSignature(i),a=e.hashForSignature(n,t.redeemScript,f.hashType);return!!u.verify(a,f.signature)&&(r[o]=void 0,s=i,!0)}),s})}}function o(t,e,n){w(b.Buffer,t);var r=g.decompile(t);e||(e=g.classifyOutput(t));var i=[];switch(e){case _.P2PKH:if(!n)break;var o=r[2],s=v.hash160(n);o.equals(s)&&(i=[n]);break;case _.P2WPKH:if(!n)break;var u=r[1],f=v.hash160(n);u.equals(f)&&(i=[n]);break;case _.P2PK:i=r.slice(0,1);break;case _.MULTISIG:i=r.slice(1,-2);break;default:return{scriptType:e}}return{pubKeys:i,scriptType:e,signatures:i.map(function(){})}}function s(t,e){if(t.prevOutType){if(t.prevOutType!==_.P2SH)throw new Error("PrevOutScript must be P2SH");if(!g.decompile(t.prevOutScript)[1].equals(e))throw new Error("Inconsistent hash160(RedeemScript)")}}function u(t,e){if(t.prevOutType){if(t.prevOutType!==_.P2WSH)throw new Error("PrevOutScript must be P2WSH");if(!g.decompile(t.prevOutScript)[1].equals(e))throw new Error("Inconsistent sha25(WitnessScript)")}}function f(t,e,n,r,i){var f,a,c,h,l,p,d,y,m,w=!1,E=!1,S=!1;if(n&&i){if(l=v.hash160(n),d=v.sha256(i),s(t,l),!n.equals(g.witnessScriptHash.output.encode(d)))throw new Error("Witness script inconsistent with redeem script");if(f=o(i,void 0,e),!f.pubKeys)throw new Error('WitnessScript not supported "'+g.toASM(n)+'"');a=g.types.P2SH,c=g.scriptHash.output.encode(l),w=E=S=!0,h=g.types.P2WSH,y=p=f.scriptType,m=i}else if(n){if(l=v.hash160(n),s(t,l),f=o(n,void 0,e),!f.pubKeys)throw new Error('RedeemScript not supported "'+g.toASM(n)+'"');a=g.types.P2SH,c=g.scriptHash.output.encode(l),w=!0,y=h=f.scriptType,m=n,E=y===g.types.P2WPKH}else if(i){if(d=v.sha256(i),u(t,d),f=o(i,void 0,e),!f.pubKeys)throw new Error('WitnessScript not supported "'+g.toASM(n)+'"');a=g.types.P2WSH,c=g.witnessScriptHash.output.encode(d),E=S=!0,y=p=f.scriptType,m=i}else if(t.prevOutType){if(t.prevOutType===_.P2SH||t.prevOutType===_.P2WSH)throw new Error("PrevOutScript is "+t.prevOutType+", requires redeemScript");if(a=t.prevOutType,c=t.prevOutScript,f=o(t.prevOutScript,t.prevOutType,e),!f.pubKeys)return;E=t.prevOutType===_.P2WPKH,y=a,m=c}else c=g.pubKeyHash.output.encode(v.hash160(e)),f=o(c,_.P2PKH,e),a=_.P2PKH,E=!1,y=a,m=c;if(E&&!b.Satoshi(r))throw new Error("Input was witness but not given witness value");y===_.P2WPKH&&(m=g.pubKeyHash.output.encode(g.witnessPubKeyHash.output.decode(m))),w&&(t.redeemScript=n,t.redeemScriptType=h),S&&(t.witnessScript=i,t.witnessScriptType=p),t.pubKeys=f.pubKeys,t.signatures=f.signatures,t.signScript=m,t.signType=y,t.prevOutScript=c,t.prevOutType=a,t.witness=E}function a(t,e,n,r){if(t===_.P2PKH){if(1===e.length&&e[0]instanceof Buffer&&1===n.length)return g.pubKeyHash.input.encodeStack(e[0],n[0])}else if(t===_.P2PK){if(1===e.length&&e[0]instanceof Buffer)return g.pubKey.input.encodeStack(e[0])}else{if(t!==_.MULTISIG)throw new Error("Not yet supported");if(e.length>0)return e=e.map(function(t){return t||m.OP_0}),r||(e=e.filter(function(t){return t!==m.OP_0})),g.multisig.input.encodeStack(e)}if(!r)throw new Error("Not enough signatures provided");return[]}function c(t,e){var n=t.prevOutType,r=[],i=[];E.indexOf(n)!==-1&&(r=a(n,t.signatures,t.pubKeys,t.script,e));var o=!1;if(n===g.types.P2SH){if(S.indexOf(t.redeemScriptType)===-1)throw new Error("Impossible to sign this type");o=!0,E.indexOf(t.redeemScriptType)!==-1&&(r=a(t.redeemScriptType,t.signatures,t.pubKeys,e)),n=t.redeemScriptType}if(n===g.types.P2WPKH)i=a(g.types.P2PKH,t.signatures,t.pubKeys,e);else if(n===g.types.P2WSH){if(E.indexOf(t.witnessScriptType)===-1)throw new Error;i=a(t.witnessScriptType,t.signatures,t.pubKeys,e),i.push(t.witnessScript),n=t.witnessScriptType}return o&&r.push(t.redeemScript),{type:n,script:g.compile(r),witness:i}}function h(t,e){this.prevTxMap={},this.network=t||y.bitcoin,this.maximumFeeRate=e||1e3,this.inputs=[],this.tx=new P}function l(t){return void 0!==t.prevOutScript&&void 0!==t.signScript&&void 0!==t.pubKeys&&void 0!==t.signatures&&t.signatures.length===t.pubKeys.length&&t.pubKeys.length>0&&void 0!==t.witness}function p(t){return t.readUInt8(t.length-1)}var d=n(20),v=n(10),g=n(3),y=n(12),m=n(5),w=n(1),b=n(2),_=g.types,E=[g.types.P2PKH,g.types.P2PK,g.types.MULTISIG],S=E.concat([g.types.P2WPKH,g.types.P2WSH]),ECPair=n(22),T=n(23),P=n(25);h.prototype.setLockTime=function(t){if(w(b.UInt32,t),this.inputs.some(function(t){return!!t.signatures&&t.signatures.some(function(t){return t})}))throw new Error("No, this would invalidate signatures");this.tx.locktime=t},h.prototype.setVersion=function(t){w(b.UInt32,t),this.tx.version=t},h.fromTransaction=function(t,e){var n=new h(e);return n.setVersion(t.version),n.setLockTime(t.locktime),t.outs.forEach(function(t){n.addOutput(t.script,t.value)}),t.ins.forEach(function(t){n.__addInputUnsafe(t.hash,t.index,{sequence:t.sequence,script:t.script,witness:t.witness})}),n.inputs.forEach(function(e,n){i(e,t,n)}),n},h.prototype.addInput=function(t,e,n,r){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var i;if("string"==typeof t)t=new Buffer(t,"hex").reverse();else if(t instanceof P){var o=t.outs[e];r=o.script,i=o.value,t=t.getHash()}return this.__addInputUnsafe(t,e,{sequence:n,prevOutScript:r,value:i})},h.prototype.__addInputUnsafe=function(t,e,n){if(P.isCoinbaseHash(t))throw new Error("coinbase inputs not supported");var i=t.toString("hex")+":"+e;if(void 0!==this.prevTxMap[i])throw new Error("Duplicate TxOut: "+i);var s={};if(void 0!==n.script&&(s=r(n.script,n.witness)),void 0!==n.value&&(s.value=n.value),!s.prevOutScript&&n.prevOutScript){var u;if(!s.pubKeys&&!s.signatures){var f=o(n.prevOutScript);f.pubKeys&&(s.pubKeys=f.pubKeys,s.signatures=f.signatures),u=f.scriptType}s.prevOutScript=n.prevOutScript,s.prevOutType=u||g.classifyOutput(n.prevOutScript)}var a=this.tx.addInput(t,e,n.sequence,n.scriptSig);return this.inputs[a]=s,this.prevTxMap[i]=a,a},h.prototype.addOutput=function(t,e){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof t&&(t=d.toOutputScript(t,this.network)),this.tx.addOutput(t,e)},h.prototype.build=function(){return this.__build(!1)},h.prototype.buildIncomplete=function(){return this.__build(!0)},h.prototype.__build=function(t){if(!t){if(!this.tx.ins.length)throw new Error("Transaction has no inputs");if(!this.tx.outs.length)throw new Error("Transaction has no outputs")}var e=this.tx.clone();if(this.inputs.forEach(function(n,r){if(!(n.witnessScriptType||n.redeemScriptType||n.prevOutType||t))throw new Error("Transaction is not complete");var i=c(n,t);if(!t&&E.indexOf(i.type)===-1&&i.type!==g.types.P2WPKH)throw new Error(i.type+" not supported");e.setInputScript(r,i.script),e.setWitness(r,i.witness)}),!t&&this.__overMaximumFees(e.byteLength()))throw new Error("Transaction has absurd fees");return e},h.prototype.sign=function(t,e,n,r,i,o){if(e.network!==this.network)throw new Error("Inconsistent network");if(!this.inputs[t])throw new Error("No input at index: "+t);r=r||P.SIGHASH_ALL;var s=this.inputs[t];if(void 0!==s.redeemScript&&n&&!s.redeemScript.equals(n))throw new Error("Inconsistent redeemScript");var u=e.getPublicKeyBuffer();if(!l(s)&&(f(s,u,n,i,o),!l(s)))throw Error(s.prevOutType+" not supported");var a;if(a=s.witness?this.tx.hashForWitnessV0(t,s.signScript,i,r):this.tx.hashForSignature(t,s.signScript,r),!s.pubKeys.some(function(t,n){if(!u.equals(t))return!1;if(s.signatures[n])throw new Error("Signature already exists");return s.signatures[n]=e.sign(a).toScriptSignature(r),!0}))throw new Error("Key pair cannot sign for this input")},h.prototype.__canModifyInputs=function(){return this.inputs.every(function(t){return void 0===t.signatures||t.signatures.every(function(t){return!t||p(t)&P.SIGHASH_ANYONECANPAY})})},h.prototype.__canModifyOutputs=function(){var t=this.tx.ins.length,e=this.tx.outs.length;return this.inputs.every(function(n){return void 0===n.signatures||n.signatures.every(function(n){if(!n)return!0;var r=p(n),i=31&r;return i===P.SIGHASH_NONE||(i===P.SIGHASH_SINGLE?t<=e:void 0)})})},h.prototype.__overMaximumFees=function(t){return(this.inputs.reduce(function(t,e){return t+(e.value>>>0)},0)-this.tx.outs.reduce(function(t,e){return t+e.value},0))/t>this.maximumFeeRate},t.exports=h}).call(e,n(0).Buffer)},function(t,e,n){var r=n(57);t.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(t,e,n){"use strict";(function(Buffer){function e(t){var e=f("sha256").update(t).digest();return f("sha256").update(e).digest()}function r(t){var n=e(t);return u.encode(Buffer.concat([t,n],t.length+4))}function i(t){var n=t.slice(0,-4),r=t.slice(-4),i=e(n);if(!(r[0]^i[0]|r[1]^i[1]|r[2]^i[2]|r[3]^i[3]))return n}function o(t){var e=u.decodeUnsafe(t);if(e){return i(new Buffer(e))}}function s(t){var e=u.decode(t),n=new Buffer(e),r=i(n);if(!r)throw new Error("Invalid checksum");return r}var u=n(87),f=n(15);t.exports={encode:r,decode:s,decodeUnsafe:o,decodeRaw:o}}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(t){r.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._decoder=null,this._encoding=null}var r=n(14).Transform,i=n(4),o=n(31).StringDecoder;t.exports=e,i(e,r),e.prototype.update=function(t,e,n){"string"==typeof t&&(t=new Buffer(t,e));var r=this._update(t);return this.hashMode?this:(n&&(r=this._toString(r,n)),r)},e.prototype.setAutoPadding=function(){},e.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},e.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},e.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},e.prototype._transform=function(t,e,n){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{n(r)}},e.prototype._flush=function(t){var e;try{this.push(this._final())}catch(t){e=t}finally{t(e)}},e.prototype._finalOrDigest=function(t){var e=this._final()||new Buffer("");return t&&(e=this._toString(e,t,!0)),e},e.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var r=this._decoder.write(t);return n&&(r+=this._decoder.end()),r}}).call(e,n(0).Buffer)},function(t,e,n){"use strict";(function(Buffer){function t(t,e){if(t.length%i!=0){var n=t.length+(i-t.length%i);t=Buffer.concat([t,o],n)}for(var r=[],s=e?t.readInt32BE:t.readInt32LE,u=0;u<t.length;u+=i)r.push(s.call(t,u));return r}function n(t,e,n){for(var r=new Buffer(e),i=n?r.writeInt32BE:r.writeInt32LE,o=0;o<t.length;o++)i.call(r,t[o],4*o,!0);return r}function r(e,r,i,o){return Buffer.isBuffer(e)||(e=new Buffer(e)),n(r(t(e,o),e.length*s),i,o)}var i=4,o=new Buffer(i);o.fill(0);var s=8;e.hash=r}).call(e,n(0).Buffer)},function(t,e,n){"use strict";function r(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,i=-1732584194,c=271733878,h=0;h<t.length;h+=16){var l=n,p=r,d=i,v=c;n=o(n,r,i,c,t[h+0],7,-680876936),c=o(c,n,r,i,t[h+1],12,-389564586),i=o(i,c,n,r,t[h+2],17,606105819),r=o(r,i,c,n,t[h+3],22,-1044525330),n=o(n,r,i,c,t[h+4],7,-176418897),c=o(c,n,r,i,t[h+5],12,1200080426),i=o(i,c,n,r,t[h+6],17,-1473231341),r=o(r,i,c,n,t[h+7],22,-45705983),n=o(n,r,i,c,t[h+8],7,1770035416),c=o(c,n,r,i,t[h+9],12,-1958414417),i=o(i,c,n,r,t[h+10],17,-42063),r=o(r,i,c,n,t[h+11],22,-1990404162),n=o(n,r,i,c,t[h+12],7,1804603682),c=o(c,n,r,i,t[h+13],12,-40341101),i=o(i,c,n,r,t[h+14],17,-1502002290),r=o(r,i,c,n,t[h+15],22,1236535329),n=s(n,r,i,c,t[h+1],5,-165796510),c=s(c,n,r,i,t[h+6],9,-1069501632),i=s(i,c,n,r,t[h+11],14,643717713),r=s(r,i,c,n,t[h+0],20,-373897302),n=s(n,r,i,c,t[h+5],5,-701558691),c=s(c,n,r,i,t[h+10],9,38016083),i=s(i,c,n,r,t[h+15],14,-660478335),r=s(r,i,c,n,t[h+4],20,-405537848),n=s(n,r,i,c,t[h+9],5,568446438),c=s(c,n,r,i,t[h+14],9,-1019803690),i=s(i,c,n,r,t[h+3],14,-187363961),r=s(r,i,c,n,t[h+8],20,1163531501),n=s(n,r,i,c,t[h+13],5,-1444681467),c=s(c,n,r,i,t[h+2],9,-51403784),i=s(i,c,n,r,t[h+7],14,1735328473),r=s(r,i,c,n,t[h+12],20,-1926607734),n=u(n,r,i,c,t[h+5],4,-378558),c=u(c,n,r,i,t[h+8],11,-2022574463),i=u(i,c,n,r,t[h+11],16,1839030562),r=u(r,i,c,n,t[h+14],23,-35309556),n=u(n,r,i,c,t[h+1],4,-1530992060),c=u(c,n,r,i,t[h+4],11,1272893353),i=u(i,c,n,r,t[h+7],16,-155497632),r=u(r,i,c,n,t[h+10],23,-1094730640),n=u(n,r,i,c,t[h+13],4,681279174),c=u(c,n,r,i,t[h+0],11,-358537222),i=u(i,c,n,r,t[h+3],16,-722521979),r=u(r,i,c,n,t[h+6],23,76029189),n=u(n,r,i,c,t[h+9],4,-640364487),c=u(c,n,r,i,t[h+12],11,-421815835),i=u(i,c,n,r,t[h+15],16,530742520),r=u(r,i,c,n,t[h+2],23,-995338651),n=f(n,r,i,c,t[h+0],6,-198630844),c=f(c,n,r,i,t[h+7],10,1126891415),i=f(i,c,n,r,t[h+14],15,-1416354905),r=f(r,i,c,n,t[h+5],21,-57434055),n=f(n,r,i,c,t[h+12],6,1700485571),c=f(c,n,r,i,t[h+3],10,-1894986606),i=f(i,c,n,r,t[h+10],15,-1051523),r=f(r,i,c,n,t[h+1],21,-2054922799),n=f(n,r,i,c,t[h+8],6,1873313359),c=f(c,n,r,i,t[h+15],10,-30611744),i=f(i,c,n,r,t[h+6],15,-1560198380),r=f(r,i,c,n,t[h+13],21,1309151649),n=f(n,r,i,c,t[h+4],6,-145523070),c=f(c,n,r,i,t[h+11],10,-1120210379),i=f(i,c,n,r,t[h+2],15,718787259),r=f(r,i,c,n,t[h+9],21,-343485551),n=a(n,l),r=a(r,p),i=a(i,d),c=a(c,v)}return Array(n,r,i,c)}function i(t,e,n,r,i,o){return a(c(a(a(e,t),a(r,o)),i),n)}function o(t,e,n,r,o,s,u){return i(e&n|~e&r,t,e,o,s,u)}function s(t,e,n,r,o,s,u){return i(e&r|n&~r,t,e,o,s,u)}function u(t,e,n,r,o,s,u){return i(e^n^r,t,e,o,s,u)}function f(t,e,n,r,o,s,u){return i(n^(e|~r),t,e,o,s,u)}function a(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function c(t,e){return t<<e|t>>>32-e}var h=n(90);t.exports=function(t){return h.hash(t,r,16)}},function(t,e,n){function r(t){var e=i[t];if(!e)return null;var n=new BigInteger(e.p,16),r=new BigInteger(e.a,16),s=new BigInteger(e.b,16),u=new BigInteger(e.n,16),f=new BigInteger(e.h,16),a=new BigInteger(e.Gx,16),c=new BigInteger(e.Gy,16);return new o(n,r,s,a,c,u,f)}var BigInteger=n(6),i=n(95),o=n(41);t.exports=r},function(t,e){e.read=function(t,e,n,r,i){var o,s,u=8*i-r-1,f=(1<<u)-1,a=f>>1,c=-7,h=n?i-1:0,l=n?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-a;else{if(o===f)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=a}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,u,f,a=8*o-i-1,c=(1<<a)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),e+=s+h>=1?l/f:l*Math.pow(2,1-h),e*f>=2&&(s++,f/=2),s+h>=c?(u=0,s=c):s+h>=1?(u=(e*f-1)*Math.pow(2,i),s+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,a+=i;a>0;t[n+p]=255&s,p+=d,s/=256,a-=8);t[n+p-d]|=128*v}},function(t,e){t.exports={name:"bigi",version:"1.4.2",description:"Big integers.",keywords:["cryptography","math","bitcoin","arbitrary","precision","arithmetic","big","integer","int","number","biginteger","bigint","bignumber","decimal","float"],devDependencies:{coveralls:"^2.11.2",istanbul:"^0.3.5",jshint:"^2.5.1",mocha:"^2.1.0",mochify:"^2.1.0"},repository:{url:"https://github.com/cryptocoinjs/bigi",type:"git"},main:"./lib/index.js",scripts:{"browser-test":"./node_modules/.bin/mochify --wd -R spec",test:"./node_modules/.bin/_mocha -- test/*.js",jshint:"./node_modules/.bin/jshint --config jshint.json lib/*.js ; true",unit:"./node_modules/.bin/mocha",coverage:"./node_modules/.bin/istanbul cover ./node_modules/.bin/_mocha -- --reporter list test/*.js",coveralls:"npm run-script coverage && node ./node_modules/.bin/coveralls < coverage/lcov.info"},dependencies:{},testling:{files:"test/*.js",harness:"mocha",browsers:["ie/9..latest","firefox/latest","chrome/latest","safari/6.0..latest","iphone/6.0..latest","android-browser/4.2..latest"]}}},function(t,e){t.exports={secp128r1:{p:"fffffffdffffffffffffffffffffffff",a:"fffffffdfffffffffffffffffffffffc",b:"e87579c11079f43dd824993c2cee5ed3",n:"fffffffe0000000075a30d1b9038a115",h:"01",Gx:"161ff7528b899b2d0c28607ca52c5b86",Gy:"cf5ac8395bafeb13c02da292dded7a83"},secp160k1:{p:"fffffffffffffffffffffffffffffffeffffac73",a:"00",b:"07",n:"0100000000000000000001b8fa16dfab9aca16b6b3",h:"01",Gx:"3b4c382ce37aa192a4019e763036f4f5dd4d7ebb",Gy:"938cf935318fdced6bc28286531733c3f03c4fee"},secp160r1:{p:"ffffffffffffffffffffffffffffffff7fffffff",a:"ffffffffffffffffffffffffffffffff7ffffffc",b:"1c97befc54bd7a8b65acf89f81d4d4adc565fa45",n:"0100000000000000000001f4c8f927aed3ca752257",h:"01",Gx:"4a96b5688ef573284664698968c38bb913cbfc82",Gy:"23a628553168947d59dcc912042351377ac5fb32"},secp192k1:{p:"fffffffffffffffffffffffffffffffffffffffeffffee37",a:"00",b:"03",n:"fffffffffffffffffffffffe26f2fc170f69466a74defd8d",h:"01",Gx:"db4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d",Gy:"9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"},secp192r1:{p:"fffffffffffffffffffffffffffffffeffffffffffffffff",a:"fffffffffffffffffffffffffffffffefffffffffffffffc",b:"64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1",n:"ffffffffffffffffffffffff99def836146bc9b1b4d22831",h:"01",Gx:"188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012",Gy:"07192b95ffc8da78631011ed6b24cdd573f977a11e794811"},secp256k1:{p:"fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f",a:"00",b:"07",n:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",h:"01",Gx:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",Gy:"483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"},secp256r1:{p:"ffffffff00000001000000000000000000000000ffffffffffffffffffffffff",a:"ffffffff00000001000000000000000000000000fffffffffffffffffffffffc",b:"5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b",n:"ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",h:"01",Gx:"6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296",Gy:"4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"}}},function(t,e,n){(function(Buffer){t.exports=function(t,e){if(!Array.isArray(t))throw TypeError("Expected values Array");if("function"!=typeof e)throw TypeError("Expected digest Function");for(var n=t.length,r=t.concat();n>1;){for(var i=0,o=0;o<n;o+=2,++i){var s=Buffer.concat([r[o],o+1!==n?r[o+1]:r[o]]);r[i]=e(s)}n=i}return r[0]}}).call(e,n(0).Buffer)},function(t,e,n){"use strict";(function(e,Buffer,n){function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function i(t,r){if(t>65536)throw new Error("requested too many random bytes");var i=new e.Uint8Array(t);t>0&&o.getRandomValues(i);var s=new Buffer(i.buffer);return"function"==typeof r?n.nextTick(function(){r(null,s)}):s}var o=e.crypto||e.msCrypto;o&&o.getRandomValues?t.exports=i:t.exports=r}).call(e,n(9),n(0).Buffer,n(7))},function(t,e,n){t.exports=n(8)},function(t,e,n){"use strict";function r(){this.head=null,this.tail=null,this.length=0}var i=(n(0).Buffer,n(26));t.exports=r,r.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},r.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},r.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},r.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e}},function(t,e,n){t.exports=n(45)},function(t,e,n){(function(r){var i=function(){try{return n(14)}catch(t){}}();e=t.exports=n(46),e.Stream=i||e,e.Readable=e,e.Writable=n(30),e.Duplex=n(8),e.Transform=n(29),e.PassThrough=n(45),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(t.exports=i)}).call(e,n(7))},function(t,e,n){t.exports=n(29)},function(t,e,n){t.exports=n(30)},function(t,e,n){(function(Buffer){function e(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e}function n(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e}function r(t,e,n){for(var r=0;r<16;r++){var c=n+r,y=e[c];e[c]=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8)}var m,w,b,_,E,S,T,P,O,I;S=m=t[0],T=w=t[1],P=b=t[2],O=_=t[3],I=E=t[4];var A;for(r=0;r<80;r+=1)A=m+e[n+h[r]]|0,A+=r<16?i(w,b,_)+v[0]:r<32?o(w,b,_)+v[1]:r<48?s(w,b,_)+v[2]:r<64?u(w,b,_)+v[3]:f(w,b,_)+v[4],A|=0,A=a(A,p[r]),A=A+E|0,m=E,E=_,_=a(b,10),b=w,w=A,A=S+e[n+l[r]]|0,A+=r<16?f(T,P,O)+g[0]:r<32?u(T,P,O)+g[1]:r<48?s(T,P,O)+g[2]:r<64?o(T,P,O)+g[3]:i(T,P,O)+g[4],A|=0,A=a(A,d[r]),A=A+I|0,S=I,I=O,O=a(P,10),P=T,T=A;A=t[1]+b+O|0,t[1]=t[2]+_+I|0,t[2]=t[3]+E+S|0,t[3]=t[4]+m+T|0,t[4]=t[0]+w+P|0,t[0]=A}function i(t,e,n){return t^e^n}function o(t,e,n){return t&e|~t&n}function s(t,e,n){return(t|~e)^n}function u(t,e,n){return t&n|e&~n}function f(t,e,n){return t^(e|~n)}function a(t,e){return t<<e|t>>>32-e}function c(t){var i=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new Buffer(t,"utf8"));var o=e(t),s=8*t.length,u=8*t.length;o[s>>>5]|=128<<24-s%32,o[14+(s+64>>>9<<4)]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8);for(var f=0;f<o.length;f+=16)r(i,o,f);for(f=0;f<5;f++){var a=i[f];i[f]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var c=n(i);return new Buffer(c)}/** @preserve
(c) 2012 by Cdric Mesnil. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],v=[0,1518500249,1859775393,2400959708,2840853838],g=[1352829926,1548603684,1836072691,2053994217,0];t.exports=c}).call(e,n(0).Buffer)},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return v[d]=r,p(d),d++}function i(t){delete v[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function s(t){if(g)setTimeout(s,0,t);else{var e=v[t];if(e){g=!0;try{o(e)}finally{i(t),g=!1}}}}function u(){p=function(t){e.nextTick(function(){s(t)})}}function f(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function a(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),p=function(n){t.postMessage(e+n,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},p=function(e){t.port2.postMessage(e)}}function h(){var t=y.documentElement;p=function(e){var n=y.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function l(){p=function(t){setTimeout(s,0,t)}}if(!t.setImmediate){var p,d=1,v={},g=!1,y=t.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(t);m=m&&m.setTimeout?m:t,"[object process]"==={}.toString.call(t.process)?u():f()?a():t.MessageChannel?c():y&&"onreadystatechange"in y.createElement("script")?h():l(),m.setImmediate=r,m.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(9),n(7))},function(t,e,n){var e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n};e.sha=n(107),e.sha1=n(108),e.sha224=n(109),e.sha256=n(47),e.sha384=n(110),e.sha512=n(48)},function(t,e,n){(function(Buffer){function e(){this.init(),this._w=a,u.call(this,64,56)}function r(t){return t<<5|t>>>27}function i(t){return t<<30|t>>>2}function o(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}var s=n(4),u=n(11),f=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);s(e,u),e.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},e.prototype._update=function(t){for(var e=this._w,n=0|this._a,s=0|this._b,u=0|this._c,a=0|this._d,c=0|this._e,h=0;h<16;++h)e[h]=t.readInt32BE(4*h);for(;h<80;++h)e[h]=e[h-3]^e[h-8]^e[h-14]^e[h-16];for(var l=0;l<80;++l){var p=~~(l/20),d=r(n)+o(p,s,u,a)+c+e[l]+f[p]|0;c=a,a=u,u=i(s),s=n,n=d}this._a=n+this._a|0,this._b=s+this._b|0,this._c=u+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},e.prototype._hash=function(){var t=new Buffer(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(){this.init(),this._w=c,f.call(this,64,56)}function r(t){return t<<1|t>>>31}function i(t){return t<<5|t>>>27}function o(t){return t<<30|t>>>2}function s(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}var u=n(4),f=n(11),a=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);u(e,f),e.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},e.prototype._update=function(t){for(var e=this._w,n=0|this._a,u=0|this._b,f=0|this._c,c=0|this._d,h=0|this._e,l=0;l<16;++l)e[l]=t.readInt32BE(4*l);for(;l<80;++l)e[l]=r(e[l-3]^e[l-8]^e[l-14]^e[l-16]);for(var p=0;p<80;++p){var d=~~(p/20),v=i(n)+s(d,u,f,c)+h+e[p]+a[d]|0;h=c,c=f,f=o(u),u=n,n=v}this._a=n+this._a|0,this._b=u+this._b|0,this._c=f+this._c|0,this._d=c+this._d|0,this._e=h+this._e|0},e.prototype._hash=function(){var t=new Buffer(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(){this.init(),this._w=s,o.call(this,64,56)}var r=n(4),i=n(47),o=n(11),s=new Array(64);r(e,i),e.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},e.prototype._hash=function(){var t=new Buffer(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(){this.init(),this._w=s,o.call(this,128,112)}var r=n(4),i=n(48),o=n(11),s=new Array(160);r(e,i),e.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},e.prototype._hash=function(){function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}var e=new Buffer(48);return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},t.exports=e}).call(e,n(0).Buffer)},function(t,e,n){function r(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(105),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(Buffer){function e(t){return Buffer.isBuffer(t)}function r(t){function e(e){if(!Buffer.isBuffer(e))return!1;if(e.length!==t)throw d.tfCustomError("Buffer(Length: "+t+")","Buffer(Length: "+e.length+")");return!0}return e.toJSON=function(){return"Buffer"},e}function i(t){return"string"==typeof t&&/^([0-9a-f]{2})+$/i.test(t)}function o(t){function e(e){if(!i(e))return!1;if(e.length!==t)throw d.tfCustomError("Hex(Length: "+t+")","Hex(Length: "+e.length+")");return!0}return e.toJSON=function(){return"Hex"},e}function s(t){return"number"==typeof t&&isFinite(t)}function u(t){return t<<24>>24===t}function f(t){return t<<16>>16===t}function a(t){return(0|t)===t}function c(t){return(255&t)===t}function h(t){return(65535&t)===t}function l(t){return t>>>0===t}function p(t){return"number"==typeof t&&t>=0&&t<=v&&Math.floor(t)===t}var d=n(49);e.toJSON=function(){return"Buffer"};var v=Math.pow(2,53)-1;t.exports={Buffer:e,BufferN:r,Finite:s,Hex:i,HexN:o,Int8:u,Int16:f,Int32:a,UInt8:c,UInt16:h,UInt32:l,UInt53:p}}).call(e,n(0).Buffer)},function(t,e,n){(function(e){function n(t,e){function n(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(r("noDeprecation"))return t;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=n}).call(e,n(9))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),f(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function u(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function f(t,n,r){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return w(i)||(i=f(t,i,r)),i}var o=a(t,n);if(o)return o;var s=Object.keys(n),v=u(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),P(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(n);if(0===s.length){if(O(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return t.stylize(Date.prototype.toString.call(n),"date");if(P(n))return c(n)}var y="",m=!1,b=["{","}"];if(d(n)&&(m=!0,b=["[","]"]),O(n)){y=" [Function"+(n.name?": "+n.name:"")+"]"}if(E(n)&&(y=" "+RegExp.prototype.toString.call(n)),T(n)&&(y=" "+Date.prototype.toUTCString.call(n)),P(n)&&(y=" "+c(n)),0===s.length&&(!m||0==n.length))return b[0]+y+b[1];if(r<0)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var _;return _=m?h(t,n,r,v,s):s.map(function(e){return l(t,n,r,v,e,m)}),t.seen.pop(),p(_,y,b)}function a(t,e){if(_(e))return t.stylize("undefined","undefined");if(w(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],s=0,u=e.length;s<u;++s)k(e,String(s))?o.push(l(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}function l(t,e,n,r,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},a.get?u=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(u=t.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),u||(t.seen.indexOf(a.value)<0?(u=g(n)?f(t,a.value,null):f(t,a.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function p(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function m(t){return"number"==typeof t}function w(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function _(t){return void 0===t}function E(t){return S(t)&&"[object RegExp]"===A(t)}function S(t){return"object"==typeof t&&null!==t}function T(t){return S(t)&&"[object Date]"===A(t)}function P(t){return S(t)&&("[object Error]"===A(t)||t instanceof Error)}function O(t){return"function"==typeof t}function I(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function A(t){return Object.prototype.toString.call(t)}function B(t){return t<10?"0"+t.toString(10):t.toString(10)}function x(){var t=new Date,e=[B(t.getHours()),B(t.getMinutes()),B(t.getSeconds())].join(":");return[t.getDate(),N[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(R,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])g(u)||!S(u)?s+=" "+u:s+=" "+i(u);return s},e.deprecate=function(n,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}if(_(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return o};var U,L={};e.debuglog=function(t){if(_(U)&&(U=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(U)){var n=r.pid;L[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else L[t]=function(){};return L[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=v,e.isNull=g,e.isNullOrUndefined=y,e.isNumber=m,e.isString=w,e.isSymbol=b,e.isUndefined=_,e.isRegExp=E,e.isObject=S,e.isDate=T,e.isError=P,e.isFunction=O,e.isPrimitive=I,e.isBuffer=n(115);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",x(),e.format.apply(e,arguments))},e.inherits=n(114),e._extend=function(t,e){if(!e||!S(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(9),n(7))},function(t,e,n){"use strict";(function(Buffer){function e(t){if(t<0||t>o||t%1!=0)throw new RangeError("value out of range")}function n(t,r,o){if(e(t),r||(r=new Buffer(i(t))),!Buffer.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return o||(o=0),t<253?(r.writeUInt8(t,o),n.bytes=1):t<=65535?(r.writeUInt8(253,o),r.writeUInt16LE(t,o+1),n.bytes=3):t<=4294967295?(r.writeUInt8(254,o),r.writeUInt32LE(t,o+1),n.bytes=5):(r.writeUInt8(255,o),r.writeUInt32LE(t>>>0,o+1),r.writeUInt32LE(t/4294967296|0,o+5),n.bytes=9),r}function r(t,n){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");n||(n=0);var i=t.readUInt8(n);if(i<253)return r.bytes=1,i;if(253===i)return r.bytes=3,t.readUInt16LE(n+1);if(254===i)return r.bytes=5,t.readUInt32LE(n+1);r.bytes=9;var o=t.readUInt32LE(n+1),s=t.readUInt32LE(n+5),u=4294967296*s+o;return e(u),u}function i(t){return e(t),t<253?1:t<=65535?3:t<=4294967295?5:9}var o=9007199254740991;t.exports={encode:n,decode:r,encodingLength:i}}).call(e,n(0).Buffer)},function(t,e,n){(function(Buffer){function e(t,e){if(void 0!==e&&t[0]!==e)throw new Error("Invalid network version");if(33===t.length)return{version:t[0],privateKey:t.slice(1,33),compressed:!1};if(34!==t.length)throw new Error("Invalid WIF length");if(1!==t[33])throw new Error("Invalid compression flag");return{version:t[0],privateKey:t.slice(1,33),compressed:!0}}function r(t,e,n){var r=new Buffer(n?34:33);return r.writeUInt8(t,0),e.copy(r,1),n&&(r[33]=1),r}function i(t,n){return e(s.decode(t),n)}function o(t,e,n){return"number"==typeof t?s.encode(r(t,e,n)):s.encode(r(t.version,t.privateKey,t.compressed))}var s=n(88);t.exports={decode:i,decodeRaw:e,encode:o,encodeRaw:r}}).call(e,n(0).Buffer)},function(t,e){},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e,n,r,i){return Promise.all([new a.GetChainTransactions(0,t,e[0],u.chunkTransactions,n,r,p).discover(),new a.GetChainTransactions(1,t,e[1],u.chunkTransactions,[],i,p).discover()]).then(function(t){var e=o(t,2);return{main:e[0],change:e[1]}})}var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(32),u=r(s),f=n(51),a=n(52),c=n(53),h={utxos:[],transactions:[],usedAddresses:[],unusedAddresses:[],changeIndex:0,balance:0,sentAddresses:{},lastBlock:{height:0,hash:"abcd"},transactionHashes:{},changeAddresses:[],allowChange:!1,lastConfirmedChange:-1,lastConfirmedMain:-1,version:1},l=void 0,p=void 0;u.initPromise.then(function(t){var e=t.accountInfo,n=t.network;l=e,p=n}),u.startDiscoveryPromise.then(function(){var t=null==l?h:l;null==t.version&&(t=h),(0,f.loadBlockRange)(t).then(function(e){var n=0===e.first.height?h:t,r=n.usedAddresses.length-1,o=n.changeIndex-1,s=null==n.lastConfirmedMain?r:n.lastConfirmedMain,f=null==n.lastConfirmedChange?o:n.lastConfirmedChange,l=n.transactions.filter(function(t){return null==t.height}).map(function(t){return t.hash}),p=n.usedAddresses.map(function(t){return t.address}).concat(n.unusedAddresses),d=n.changeAddresses;return i(e,[s,f],n.transactions,p,d).then(function(t){return(0,a.findDeleted)(l,u.doesTransactionExist).then(function(r){return(0,c.integrateNewTxs)(t,n,e.last,r)})})}).then(function(t){return u.returnSuccess(t)},function(t){return u.returnError(t)})})}]);